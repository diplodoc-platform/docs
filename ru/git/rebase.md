# Git Rebase

`git rebase` - это один из двух способов переноса изменений из одной ветки в другую в Git (второй способ - `git merge`).

## Что такое rebase?

Когда вы работаете в отдельной ветке, а в это время в `main` (или другую основную ветку) добавляются новые коммиты, ваша ветка "отстает". Чтобы включить в свою ветку последние изменения из `main`, вы можете сделать `rebase`.

Rebase берет все коммиты из вашей текущей ветки и "перемещает" их так, как будто они были сделаны поверх последнего коммита в `main`.

## Как использовать `git rebase`

1.  **Убедитесь, что ваша основная ветка (`main` или `master`) обновлена:**

    ```bash
    git checkout main
    git pull origin main
    ```

2.  **Переключитесь на вашу рабочую ветку:**

    ```bash
    git checkout my-feature-branch
    ```

3.  **Выполните rebase:**

    ```bash
    git rebase main
    ```

    Эта команда применит все коммиты из `my-feature-branch` поверх последнего коммита в `main`.

## Интерактивный rebase

Интерактивный rebase (`git rebase -i`) - это мощный инструмент, который позволяет вам изменять коммиты в процессе их переноса. Вы можете:

*   **`pick`**: использовать коммит "как есть".
*   **`reword`**: изменить сообщение коммита.
*   **`edit`**: изменить коммит (например, добавить или удалить файлы).
*   **`squash`**: объединить коммит с предыдущим.
*   **`fixup`**: объединить коммит с предыдущим, но отбросить сообщение этого коммита.
*   **`drop`**: удалить коммит.

### Как использовать интерактивный rebase

Например, чтобы объединить последние 3 коммита в один:

```bash
git rebase -i HEAD~3
```

Git откроет текстовый редактор со списком коммитов.

```
pick a1b2c3d First commit
pick e4f5g6h Second commit
pick i7j8k9l Third commit
```

Чтобы объединить их, измените `pick` на `squash` (или `s`) для второго и третьего коммитов:

```
pick a1b2c3d First commit
squash e4f5g6h Second commit
squash i7j8k9l Third commit
```

После сохранения файла Git попросит вас ввести новое сообщение для объединенного коммита.

## Разрешение конфликтов

Во время rebase могут возникнуть конфликты, если изменения в вашей ветке затрагивают те же строки кода, что и изменения в `main`.

1.  Git остановит процесс rebase и сообщит о конфликте.
2.  Откройте файлы с конфликтами и разрешите их вручную.
3.  После разрешения конфликтов, используйте `git add <имя файла>` для каждого исправленного файла.
4.  Продолжите rebase:

    ```bash
    git rebase --continue
    ```

    Если вы хотите прервать rebase, используйте:

    ```bash
    git rebase --abort
    ```

## `git pull --rebase`

Когда вы получаете изменения из удаленного репозитория с помощью `git pull`, по умолчанию используется `merge`. Чтобы использовать `rebase`, можно выполнить:

```bash
git pull --rebase
```

Это сначала загрузит изменения (`fetch`), а затем применит ваши локальные коммиты поверх обновленной ветки (`rebase`).

## Когда не следует использовать rebase

**Никогда не делайте rebase для коммитов, которые уже были отправлены в общий (удаленный) репозиторий.**

Rebase создает *новые* коммиты. Если вы сделаете rebase ветки, с которой работают другие люди, это приведет к расхождению историй коммитов и создаст большие проблемы для всей команды. Для синхронизации с удаленной веткой в таких случаях используйте `git merge`.