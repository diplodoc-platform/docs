# Таблица

Предоставляет доступ к статистическим данным, включая данные, доступные в отчетах. Возвращает результат в виде таблицы.

## Формат запроса {#request}

```
GET {{ api-url }}/stat/v1/data
  ? ids=<int,int,...>
  & metrics=<string>
  & [accuracy=<string>]
  & [callback=<string>]
  & [date1=<string>]
  & [date2=<string>]
  & [dimensions=<string>]
  & [filters=<string>]
  & [group=<group_type>]
  & [id=<integer>]
  & [include_undefined=<boolean>]
  & [lang=<string>]
  & [limit=<integer>]
  & [offset=<integer>]
  & [pretty=<boolean>]
  & [sort=<string>]
```

#|
|| `ids`* | Идентификаторы счетчиков, через запятую. Используется вместо параметра `id`. ||
|| `metrics`* | Список метрик, разделенных запятой.

Лимит: 20 метрик в запросе. ||
|| `accuracy` | Точность вычисления результата. Позволяет управлять семплированием (количеством визитов, использованных при расчете итогового значения).
Значение по умолчанию: `medium`. ||
|| `callback` | Функция обратного вызова, которая обрабатывает ответ API. ||
|| `date1` | Дата начала периода выборки в формате YYYY-MM-DD. Также используйте значения: `today`, `yesterday`, `ndaysAgo`.

Значение по умолчанию: `6daysAgo`. ||
|| `date2` | Дата окончания периода выборки в формате YYYY-MM-DD. Также используйте значения: `today`, `yesterday`, `ndaysAgo`.

Значение по умолчанию: `today`. ||
|| `dimensions` | Список группировок, разделенных запятой.

Лимит: 10 группировок в запросе. ||
|| `filters` | [Фильтр сегментации](segmentation.md).

Лимит: количество уникальных группировок и метрик — до 10, количество отдельных фильтров — до 20, длина строки в фильтре — до 10000 символов. ||
|| `group` | Группировка данных по времени.
Значение по умолчанию: `week`.

Допустимые значения:

- `all` — временной интервал не разбивается.
- `hours` — временной интервал разбивается на интервалы из нескольких часов.
- `auto` — автоматический режим.
- `week` — временной интервал разбивается по неделям.
- `month` — временной интервал разбивается по месяцам.
- `hour` — временной интервал разбивается на часовые интервалы.
- `year` — временной интервал разбивается по годам.
- `minutes` — временной интервал разбивается на интервалы из некоторого количества минут.
- `day` — временной интервал разбивается по дням.
- `dekaminute` — временной интервал разбивается на 10-минутные интервалы.
- `quarter` — временной интервал разбивается по кварталам.
- `minute` — временной интервал разбивается на минутные интервалы. ||
|| `id` | Идентификатор счетчика. Устарело, используйте `ids`. ||
|| `include_undefined` | Включает в ответ строки, для которых значения группировок не определены. Влияет только на первую группировку. По умолчанию выключено. ||
|| `lang` | Язык. ||
|| `limit` | Количество элементов на странице выдачи.

Лимит: 100000.

Значение по умолчанию: 100 ||
|| `offset` | Индекс первой строки выборки, начиная с 1.
Значение по умолчанию: 1. ||
|| `pretty` |Задает форматирование результата. Чтобы использовать форматирование, укажите значение `true`.
Значение по умолчанию: `false`  ||
|| `sort` | Список группировок и метрик, разделенных запятой, по которым осуществляется сортировка. По умолчанию сортировка производится по возрастанию.Чтобы отсортировать данные по убыванию, укажите знак <q>-</q> перед группировкой или метрикой. ||
|#

## Формат ответа {#response}

```json translate=no
{
    "total_rows" : <long>,
    "sampled" : <boolean>,
    "sample_share" : <double>,
    "sample_size" : <long>,
    "sample_space" : <long>,
    "data_lag" : <int>,
    "query" : {
        "ids" : [ <int>, ... ],
        "dimensions" : [ <string>, ... ],
        "metrics" : [ <string>, ... ],
        "sort" : [ <string>, ... ],
        "date1" : <string>,
        "date2" : <string>,
        "filters" : <string>,
        "limit" : <integer>,
        "offset" : <integer>
    },
    "totals" : [ <double>, ... ],
    "min" : [ <double>, ... ],
    "max" : [ <double>, ... ],
    "data" : [ {
        "dimensions" : [ {
            "key_1" : <string>,
            "key_2" : ...
        }, ... ],
        "metrics" : [ <double>, ... ]
    }, ... ]
}
```

#|
|| **Параметры** | **Описание** ||
|| `total_rows` | Общее количество строк в ответе. ||
|| `sampled` | Признак семплирования. Показывает, был ли применен семплинг. Возможные значения: `true`, `false`. ||
|| `sample_share` | Доля данных, по которым осуществлялся расчет. Доступно значение в пределах от 0 до 1. ||
|| `sample_size` | Количество строк в выборке данных. ||
|| `sample_space` | Количество строк данных. ||
|| `data_lag` | Задержка в обновлении данных, в секундах. ||
|| `query` | Исходный запрос. Содержит параметры запроса, включая развернутые параметры из шаблона и параметры для схемы параметризации атрибутов. ||
|| `totals` | Общие результаты для метрик по всему множеству данных (с учетом фильтра). ||
|| `min` | Минимальные результаты для метрик среди попавших в выдачу ключей. ||
|| `max` | Максимальные результаты для метрик среди попавших в выдачу ключей. ||
|| `data` | Строки ответа. Представляет собой массив, каждый элемент которого — одна строка результата. ||
|| `query.ids` | Идентификаторы счетчиков. ||
|| `query.dimensions` | Массив группировок. ||
|| `query.metrics` | Массив метрик. ||
|| `query.sort` | Массив сортировок. ||
|| `query.date1` | Дата начала периода выборки в формате YYYY-MM-DD. ||
|| `query.date2` | Дата окончания периода выборки в формате YYYY-MM-DD. ||
|| `query.filters` | Фильтр сегментации. ||
|| `query.limit` | Количество элементов на странице выдачи. ||
|| `query.offset` | Индекс первой строки выборки, начиная с 1. ||
|| `data.dimensions` | Массив значений группировок для данной строки. Каждое из значений группировки представляет собой объект. В нем обязательно присутствует поле `name` — текстовое значение, но могут присутствовать дополнительные поля, например идентификатор — `id`. ||
|| `data.metrics` | Массив значений метрик для данной строки. Значения этого массива — числа или `null`. ||
|#

## Пример запроса {#example}
 
{% list tabs %}
 
- cURL

  ```bash translate=no
  curl -X GET \
    '{{ api-url }}/stat/v1/data?ids=1111&metrics=ym:ge:users' \
    -H 'Authorization: OAuth <your_token>'
  ```

  где `<your_token>` — это OAuth-токен, который можно получить по [инструкции](../intro/authorization.md#get-oauth-token).

- HTTP

  ```http translate=no
  GET /stat/v1/data?ids=1111&metrics=ym:ge:users HTTP/1.1
  Host: api.appmetrica.yandex.ru
  Authorization: OAuth <your_token>
  ```

  где `<your_token>` — это OAuth-токен, который можно получить по [инструкции](../intro/authorization.md#get-oauth-token).

{% endlist %}

{{ feedback }}

<a href="../../troubleshooting/feedback-new.html">
  <span class="button">Написать в службу поддержки</span>
</a>

{% include notitle [feedback](../../_includes/feedback-button.md) %}
