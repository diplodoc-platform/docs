# Управление Conversion Value

Conversion value (ценность конверсии) в SKAdNetwork — это способ измерения действий пользователя, которые он совершил после установки.

![](https://yastatic.net/s3/doc-binary/src/dev/appmetrica/{{locale}}/images/mobile-tracking/conversion-value-path.png){style="border: solid 1px #cccccc; max-width: 800px;"}

## Как это работает {#how-it-works}

Приложение определяет действия, которые необходимо учитывать, и вызывает метод [updateConversionValue](https://developer.apple.com/documentation/storekit/skadnetwork/3566697-updateconversionvalue) для обновления ценности конверсии. Метод передает рекламодателям и рекламным сетям целые числа от 0 до 63, поэтому отследить действия конкретного пользователям нельзя.

Так как связать ценность конверсии с конкретным пользователем нельзя, она измеряется в сравнении с другими каналами данных по эффективности.

В течение 24 часов после начала работы приложение отправляет первые значения ценности конверсии. Они будут обновляться каждые 24 часа, но учтены будут только при увеличении ценности конверсии.

Ценность конверсии будет обновляться, пока не достигнет максимума или с последнего увеличения не пройдет 24 часа. Как только ценность конверсии будет зафиксирована, в течение суток ее [постбек](*постбек) будет отправлен в рекламную сеть.

## Наше решение {#our-solution}

AppMetrica предлагает несколько методов измерения ценности конверсии, из которых можно выбрать наиболее подходящий для вас:

- **Достижение событий** оценивает конверсию совершения любых 6 целевых событий.
- **Количество событий** подсчитывает, сколько целевых событий в среднем и всего совершили пользователи.
- **Выручка** оценивает сумму покупок, ARPU, количество и долю платящих пользователей (на основе Revenue или Ecommerce событий).

Настройте желаемый вариант прямо в интерфейсе, и SDK AppMetrica будет автоматически измерять и передавать в SKAdNetwork ценность конверсии.

Преимущества:

- Не нужно тратить время на разработку и тестирование (достаточно SDK версии 4.0.0).
- Если метод измерения конверсии изменился, то обновлять приложение не потребуется. Новый метод будет применен на всех версиях одновременно и автоматически.

## Выбор приложения {#app-choice}

В одном приложении должны быть единые правила измерения ценности конверсии. Предупреждение "привязана другая схема конверсий" означает, что в вашем приложении также используется другой APIKey, на котором измерение уже настроено.

Для одного APIKey в нескольких приложениях можно применить одну схему измерения ценности конверсий.

## Типы измерения {#value-types}

Выбранный тип определяет, какие действия в приложении влияют на ценность конверсии.

### Достижение событий {#advancement}

Модель отражает количество и долю пользователей, достигших заданного события. Для каждого из 6 свободных слотов можно выбрать обычное, revenue или ecommerce событие.

{% cut "Пример" %}

Для оценки эффективности двух каналов устанавливаются 2 события: пробная и платная подписки. Достижение событий показывает, что первый канал приносит конверсию в 20% на первом этапе и 5% на втором этапе, а второй канал приносит 15% на первом этапе и 7% на втором.

{% endcut %}

### Количество событий {#quantity}

Модель показывает общее количество событий и среднее на пользователя. Можно отслеживать их количество до 63 раз или увеличить максимум, изменив размер шага.

{% cut "Пример" %}

Целевым действием является прохождение уровня. Модель позволяет оценить общее количество событий для всех пользователей и сколько в среднем уровней проходят игроки, привлеченные разными каналами.

{% endcut %}

**Размер шага** измеряет количество событий до следующего шага. По умолчанию он равен 1, но его можно увеличить при замере большого количества событий.

{% cut "Пример" %}

Целевое действие в вашем приложении — просмотр фото. За первые сутки пользователи в среднем просматривают несколько сотен фотографий. Но максимальная ценность конверсии равна 63, значит при подсчете она будет одинаковой для большинства. Чтобы обойти это ограничение, нужно считать каждые 5, тогда максимально получится отследить 315 действий (первое действие с ценностью 1, затем 6 действий — ценность 2, и так далее).

{% endcut %}

### Выручка {#value-types}

Модель показывает выручку, количество и долю платящих пользователей, ARPU. Выручка во всех валютах конвертируется в выбранную единицу. Транзакции за период измерения суммируются.

{% note info %}

Максимально возможное значение выручки равна 63 единицам. Если 1 единица измерения = 0.5$, то минимальный зафиксированный доход равен 0.5$, следующий — 1$, а максимальный за период — 32$.

{% endnote %}

**Источник данных** определяет, на основе каких событий подсчитывать выручку — revenue или ecommerce.

**Размер шага** задает минимум и точность измеряемого дохода. Минимум равен одной единице, а максимум равен 63 единицам.

{% cut "Пример" %}

Средний доход с рекламы с пользователя в первые 3 дня колеблется от нескольких центов до полутора долларов. Чтобы получить приближенный к реальности подсчет, установите единицей 0.02$, тогда доход будет рассчитан от 0.02$ до 1.26$.

{% endcut %}

## Период измерения {#period}

Рекламная сеть не получит постбэк, пока ценность конверсии продолжает увеличиваться чаще, чем раз в сутки. При измерении постоянно растущих показателей, например, количества событий или выручки, может быть полезно ограничить период, в течение которого AppMetrica будет отправлять ценность конверсии.

{% cut "Пример" %}

Ваши пользователи за сутки просматривают десятки, а иногда сотни постов, поэтому вы используете размер шага 10, соответственно максимум — 621 просмотр поста. Для пользователей, которые стабильно просматривают по 10-15 постов в день, ценность конверсии будет будет измеряться почти 2 месяца — и все это время вы даже о них не узнаете.

{% endcut %}

Ограничение периода имеет смысл, если вы планируете сменить предмет измерения. Так как постбэк SKAdNetwork не содержит данных об этом, то значение, посчитанное по прошлой модели, но пришедшее в момент действия новой, может исказить результаты.

{% cut "Пример" %}

Измеряется количество события А. В понедельник пользователь устанавливает ваше приложение и ценность конверсии увеличивается каждый день. В среду модель изменяется на выручку. Пользователь продолжает использовать приложение до пятницы включительно, а на выходных перестает. В конце недели приходит постбэк с ценностью конверсии 10, которая принимается за 10$ выручки с этого пользователя — хотя в реальности выручки не было. Если ограничить период 2 сутками, то такой ситуации не произойдет.

{% endcut %}

{{ feedback }}

<a href="../troubleshooting/feedback-new.html">
  <span class="button">Написать в службу поддержки</span>
</a>

{% include notitle [feedback](../_includes/feedback-button.md) %}

[*постбек]: GET-запрос по заданной ссылке (postback URL), в который можно передать определенные параметры. Для одной кампании можно добавить до 5 запросов. Подробнее о [политике отправки postback](policy.md).
