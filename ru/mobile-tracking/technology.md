# Технология трекинга AppMetrica

Трекинг установок приложения производится с помощью [атрибуции](policy.md). AppMetrica использует несколько способов атрибуции. Они применяются в порядке убывания точности, постепенно ослабляя строгость критериев.

Если Device Identifier Matching не может быть применен, то AppMetrica пытается применить Install Referrer. Если и подходящий Install Referrer не был найден или метод невозможен (на iOS), то используется Probabilistic Matching.

## Device Identifier Matching {#device-identifier-matching}

Особенности:

- почти 100% точность атрибуции;
- временной интервал атрибуции (между кликом и первым запуском) составляет 10 суток, для показов — 24 часа;
- поддерживается не всеми рекламными сетями.

Для использования этого метода необходимо передавать идентификатор устройства со стороны рекламной сети в большинстве случаев.

В некоторых случаях рекламные сети не имеют доступ к идентификатору устройства. В основном это рекламные размещения в мобильных приложениях. Клики с такой рекламы очень редко имеют информацию об идентификаторе устройства.

### Принцип работы {#device-identifier-matching}

1. Ваше приложение продвигается в рекламной сети, которая имеет возможность получить идентификатор устройства. При клике на баннер рекламная сеть помещает в tracking URL различные параметры в соответствии с шаблоном. Одним из этих параметров является идентификатор устройства.
    
    AppMetrica поддерживает следующие виды идентификаторов:
    
    {% list tabs %}
    
    - Android
    
      `google_aid` (Google Advertising ID) и его хэшированные производные.
    
    - iOS
    
      `ios_ifa` (Apple Identifier for Advertising) и его хэшированные производные.
    
    {% endlist %}
    
    Подробно о параметрах читайте в разделе [Параметры трекинг-ссылки](tracking-specification.md).
    
    AppMetrica сохраняет эти идентификаторы в привязке к клику. После клика пользователь переправляется в магазин приложений для установки.
    
2. После установки и запуска приложения AppMetrica SDK собирает информацию об устройстве, в том числе идентификатор устройства, и отправляет данные на сервер AppMetrica.
3. AppMetrica сопоставляет идентификаторы устройства, полученные при клике и первом запуске приложения.
4. Информация об установке отправляется в рекламную сеть (postback). Подробнее в раздел [Параметры postback](postback-specification.md).

![](https://yastatic.net/s3/doc-binary/src/dev/appmetrica/{{locale}}/images/mobile-tracking/01rudeviceid-1.png)

## Install Referrer {#install-referrer}

Особенности:

- почти 100% точность атрибуции;
- временной интервал атрибуции (между кликом и первым запуском) составляет 10 суток, для показов — 24 часа;
- применимо только для Play Маркет и Yandex.Store;
- не требуется передавать идентификатор устройства со стороны рекламных сетей;
- требуется [отслеживание источников установки приложения](../sdk/android/analytics/android-operations.md). Рекомендуем настроить отслеживание с помощью SDK заранее.

### Принцип работы {#install-referrer}

1. Пользователь переходит по рекламе приложения. При прохождении сервиса редиректов в целевую ссылку (ведущую непосредственно в магазин приложений) дописывается параметр специального вида `&referrer=` с уникальным идентификатором перехода (`ym_tracking_id`). После клика пользователь перенаправляется в магазин приложений для установки.

    {% note info %}
    
    Если используется [S2S](s2s.md), то уникальный идентификатор нужно передавать самостоятельно.
    
    {% endnote %}
    
    
2. После установки и запуска приложения AppMetrica SDK может получить `INSTALL_REFERRER`, содержащий значение параметра `ym_tracking_id`, от магазина приложений.
3. AppMetrica сопоставляет значение параметра `ym_tracking_id` при клике и первом запуске приложения.
4. Информация об установке отправляется в рекламную сеть (postback). Подробнее в раздел [Параметры postback](postback-specification.md).

![](https://yastatic.net/s3/doc-binary/src/dev/appmetrica/{{locale}}/images/mobile-tracking/02rureferrer-1.png)

## Probabilistic Matching {#device-fingerprint-matching}

Особенности:

- эвристический алгоритм AppMetrica дает хорошую точность атрибуции;
- временной интервал атрибуции (между кликом и первым запуском) составляет 24 часа;
- не требуется передавать идентификатор устройства со стороны рекламных сетей;
- возможна атрибуция при любом типе размещения: в приложениях, в мобильном интернете.

Данный способ использует оригинальную технологию AppMetrica, которая дает высокую точность атрибуции.

### Принцип работы {#device-fingerprint-matching}

1. Пользователь переходит по рекламе приложения. При прохождении через сервис редиректов собираются необходимые признаки для fingerprint: User-Agent браузера, IP-адрес устройства, время и др. После клика пользователь перенаправляется в магазин приложений для установки.
2. После установки и запуска приложения AppMetrica SDK собирает информацию об устройстве и отправляет ее на сервер AppMetrica.
3. AppMetrica сопоставляет параметры при клике и первом запуске приложения; производит связывание установки с кликом.
4. Информация об установке отправляется в рекламную сеть (postback). Подробнее в раздел [Параметры postback](postback-specification.md).

![](https://yastatic.net/s3/doc-binary/src/dev/appmetrica/{{locale}}/images/mobile-tracking/03rufingerprint-1.png)

{{ feedback }}

<a href="../troubleshooting/feedback-new.html">
  <span class="button">Написать в службу поддержки</span>
</a>

{% include notitle [feedback](../_includes/feedback-button.md) %}
