# Создание трекера

{% note alert "" %}

Трекер можно создать только после подключения AppMetrica SDK. Подробнее в разделе Интеграция SDK для [Android](../sdk/android/analytics/quick-start.md) | [iOS](../sdk/ios/analytics/quick-start.md).

{% endnote %}

Ниже описаны этапы создания трекера и получения [трекинг-ссылки](*трекинг-ссылки). Cсылка может вести себя следующим образом в зависимости от условий:

 - Вести пользователя в приложение, если оно установлено.
 - Вести пользователя на соответствующий платформе магазин приложений, если приложение не установлено.

Ссылка используется в рекламных кампаниях для отслеживания установок и открытий приложения.

{% note info "" %}

В AppMetrica работает автоматическое решение по борьбе с клик-спамом. Трекеры с большим количеством кликов и аномально низкой конверсией в установку будут ежедневно автоматически блокироваться. AppMetrica не будет выполнять атрибуцию для таких трекеров. Исторические данные по ним останутся прежними.

{% endnote %}

## Шаг 1. Заполните описание кампании {#step1}

1. В интерфейсе AppMetrica перейдите в раздел **Трекинг** → **Создать трекер**.

2. В блоке **Описание кампании** заполните все поля:

   - **Предустановка** — включите опцию, если трекер создается для предустановок. Подробнее о создании трекера для предустановок в разделе [Создание трекера для предустановок](add-preinstall.md).
   - **Это ремаркетинговый трекер** — включите опцию, если трекер создается для [ремаркетинг-кампании](*ремаркетинг-кампании). Подробнее о создании трекера для ремаркетинг-кампании в разделе [Создание ремаркетинг-трекера](add-remarketing-tracker.md).
   - **Антифрод by FraudScore** — включите опцию, если вы хотите проверять установки и события на фрод с помощью {% if tld == "ru" %}[FraudScore](../common/fraud-score.md){% else %}FraudScore{% endif %}.

      Опция недоступна для партнеров Google Ads, Google Search и Yandex.Direct.

      {% cut "Подробности" %}
     
      Опция является платной ([Тарифы](../common/pricing/ru-currency.md){% if locale == 'ru' %}, [Условия для агентств](../common/pricing/ru-agency.md){% endif %}) и доступна только для юридических лиц, зарегистрированных в РФ.
     
      {% endcut %}
      
   - **Название** — имя трекера. После создания трекер будет доступен в списке трекеров с указанным названием.
   - **Приложение** — приложение, для которого создается трекер.
   - **Партнёр** — рекламный партнер, которому будут отнесены клики, установки и целевые события. Трекер можно использовать не только с партнерами из списка, но и в любой рекламной сети, которая поддерживает трекинг-ссылки, а также на внешнем сайте.
   Если нужного партнера нет в списке — [добавьте нового партнера](add-partner.md). После добавления новый партнер будет доступен в списке.

    {% note info "" %}

    После создания трекера изменить партнера в настройках невозможно.

    {% endnote %}

## Шаг 2. Настройте SmartLink {#step2}

{% include [smart-link](_includes/smart-link.md) %}

## Шаг 3. Настройте переход в приложение {#step3}

1. Android: укажите deeplink в smartlink.
1. iOS 12.3+: deeplink в обычных трекинг-ссылках не работают. Для перехода в приложение поддержите универсальные ссылки по [инструкции](../sdk/ios/analytics/ios-universal-links.md#types).
1. После выполнения [инструкции](../sdk/ios/analytics/ios-universal-links.md#types), в трекере будет генерироваться app-to-app трекинг-ссылка, которую можно использовать для обеих платформ.

    {% list tabs %}

    - Приложение не установлено

      App-to-app трекинг-ссылка работает как обычная трекинг-ссылка.

    - Приложение установлено

      - Android: переход в приложение происходит через редирект на обычный deeplink, указанный в настройках трекера.
      - iOS: открытие приложения происходит по технологии Universal links.

    {% endlist %}

## Шаг 4. *(Опционально)*  Настройте атрибуцию {#step4}

{% include [attribution](_includes/attribution.md) %}

## Шаг 5. *(Опционально)*  Настройте постбеки {#step5}

{% include [postback](_includes/postback.md) %}

## Шаг 6. Сохраните изменения и протестируйте трекер {#step6}

1. Внизу страницы нажмите кнопку **{{ save }}**.
    Список всех сохраненных трекеров отображается в разделе **Трекеры**. Их можно редактировать и переводить в архив. После архивации статистика трекера доступна в отчетах.

2. Перед запуском рекламной кампании протестируйте работу трекера. Подробнее в разделе [Тестирование трекера](testing-attribution.md).

## Шаг 7. Используйте созданную трекинг-ссылку {#step7}

{% note alert "" %}

Не используйте атрибут `target="_blank"` при вставке ссылки в разметку. Некоторые браузеры могут блокировать переход при открытии ссылки в новом окне.
Не располагайте ссылку в элементе `iframe`.

{% endnote %}

![](../../_images/tracking-url-desc-{{ locale }}.png){style="border: solid 1px #cccccc; max-width: 800px;"}

{% note info "" %}

Если нужно, чтобы ссылка открывала iOS приложение, используйте app-to-app трекинг-ссылку. Приложение должно быть установлено.

{% endnote %}

Трекинг-ссылку можно использовать в рекламной кампании после успешного тестирования. Для этого скопируйте ссылку в блоке  **Трекинг-ссылка**.

{% note info "" %}

Если нужно, чтобы ссылка открывала iOS приложение, скопируйте ссылку из блока **app-to-app трекинг-ссылка**. 

{% endnote %}

В трекинг-ссылке можно указать предопределенные, статические (UTM) и произвольные параметры, которые будут передаваться в целевую ссылку, deeplink и postback URL. Например, чтобы отключить JavaScript-редирект, добавьте параметр `appmetrica_js_redirect=0`:
```
https://redirect.appmetrica.yandex.com/serve/123456?appmetrica_js_redirect=0
```

Подробнее в разделе [Параметры трекинг-ссылки](tracking-specification.md).

Для атрибуции по показам используйте ссылку вида:

```
https://impression.appmetrica.yandex.com/serve/123456
```

## Узнать больше {#learn-more}

- [Как создать трекинг-ссылку для других источников установок?](../troubleshooting/troubleshooting.md#tracking-url)
- [Блог AppMetrica: Параметры в tracking URL](https://appmetrica.yandex.ru/blog/custom-url-parameters)
- [Использует ли AppMetrica UTM-метки?](../troubleshooting/troubleshooting.md#utm)

{{ feedback }}

<a href="../troubleshooting/feedback-new.html">
  <span class="button">Написать в службу поддержки</span>
</a>

{% include notitle [feedback](../_includes/feedback-button.md) %}

[*ремаркетинг-кампании]: Рекламная кампания, которая направлена на возвращение пользователей в установленное приложение. Подробнее о создании ремаркетинг-кампании в разделе [Создание ремаркетинг-трекера](add-remarketing-tracker.md).

[*трекинг-ссылки]: Ссылка вида `https://redirect.appmetrica.yandex.com/serve/*`, при переходе по которой, пользователь попадает в магазин приложений для установки приложения или если приложение уже установлено, открывает его (если указан deeplink). Создается при заведении трекера. Подробнее о трекинге в разделе [Что такое трекинг](index.md).

[*Постбеки]: GET-запрос по заданной ссылке (postback URL), в который можно передать определенные параметры. Для одной кампании можно добавить до 5 запросов. Подробнее о [политике отправки postback](policy.md).

[*PostbackURL]: Ссылка, по которой отправляется сообщение о событии (установка или целевое событие). Получателем события является партнер. В postback URL можно [передать дополнительные параметры](postback-specification.md).
