# Тестирование атрибуции

Чтобы убедиться в правильной настройке трекинга, протестируйте работу атрибуции до запуска рекламной кампании.

Подробнее об атрибуции в разделе [Атрибуция установки приложения](policy.md).

Ниже описаны этапы тестирования атрибуции:

## Шаг 1. Включите опцию "Реатрибуция" или тестируйте на тестовом устройстве {#test}

{% list tabs %}

- Включить опцию "Реатрибуция"

  В AppMetrica установка приложения на одно и то же устройство атрибутируется партнеру один раз. Следующие установки приложения на устройство считаются переустановками и не отображаются в отчетах.

  Включение [реатрибуции](https://appmetrica.yandex.ru/docs/ru/mobile-tracking/policy#reattribute) позволит посчитать повторную установку, если предыдущая была из другого источника:

  1. Перейдите в настройки трекера, который хотите протестировать.
  2. На вкладке **Настройка атрибуции** включите опцию **Реатрибуция** на время тестирования трекера.
  3. Не забудьте выключить опцию по завершении тестирования.

  {% note warning %}

  Если предыдущая установка на устройство была с того же трекера, новая установка не посчитается второй раз даже с включенной реатрибуцией. Используйте для тестирования другой трекер или добавьте устройство в тестовые для реатрибуции.

  {% endnote %}

- Тестировать с помощью тестового устройства

  Для тестового устройства все установки считаются новыми, в том числе повторные установки на один трекер. Чтобы добавить тестовое устройство:

   1. Перейдите в **Настройки** и выберите **Тестовые устройства**.
   2. Укажите имя и идентификатор устройства: доступны Google AID, Apple IDFA.

      {% cut "Как получить Google AID" %}

        На устройстве откройте приложение «Настройки Google» и перейдите в пункт меню **Реклама**. На экране указан Google AID (**Ваш рекламный идентификатор**).

        {% note alert %}

        На Android доступ к рекламному идентификатору есть по умолчанию, но его получение может быть [отключено](https://appmetrica.yandex.ru/docs/ru/sdk/android/get-ad-id) самими разработчиками, например, для детских приложений, где сбор идентификаторов запрещен политикой Google Play.

        {% cut "Как проверить, что приложение собирает рекламные идентификаторы" %}

        Чтобы проверить, что у приложения есть доступ к идентификатору Google AID, выгрузите сырые данные по установкам через вкладку **Экспорт данных** или через Logs API. Если поле `google_aid` заполнено при установках последней версии приложения, сбор идентификаторов работает на Android.

        Другой способ: проверьте настройки приложения на устройстве. Найдите на устройстве **Все разрешения**, там должен быть пункт **Разрешение для рекламного идентификатора**. Расположение этого меню и названия могут отличаться в зависимости от прошивки устройства.

        {% endcut %}

        {% endnote %}

      {% endcut %}

      {% cut "Как получить Apple IDFA" %}

        1. Установите на устройство приложение [The Identifiers](https://itunes.apple.com/us/app/the-identifiers/id564618183).
        2. В приложении откройте вкладку **Raw**. В поле **Advertising Identifier** указан IDFA вашего устройства.

       {% note alert %}

       Начиная с iOS 14.5 у приложений нет доступа к Apple IDFA. Если доступ к нему не запрашивается до инициализации AppMetrica SDK, добавление устройства в тестовые по IDFA не будет работать. В этом случае тестировать можно только через реатрибуцию в настройках трекера.

        {% cut "Как проверить, что приложение собирает рекламные идентификаторы" %}

        Проверьте, что у приложения есть разрешение на отслеживание, в настройках, либо в соответствующем окне при первом запуске приложения после переустановки.

        {% endcut %}

       {% endnote %}

      {% endcut %}

   3. Укажите **Назначение** и нажмите **Добавить**.

  При использовании тестового устройства реатрибуцию в трекере включать не нужно.

{% endlist %}

## Шаг 2. Пройдите по трекинговой ссылке и установите приложение {#check-the-link}

Чтобы протестировать трекер, откройте трекинговую ссылку на тестовом устройстве.

1. Передайте трекинговую ссылку на тестовое устройство. Например, ссылку можно:
    - сохранить в заметках;
    - отправить по почте;
    - (_рекомендуется_) разместить на статической веб-странице. При этом атрибут `rel` HTML‑ссылки не должен содержать значения `noopener noreferrer`.

    {% note alert %}

    Не используйте мессенджеры для отправки трекинговой ссылки. Некоторые мессенджеры убирают редиректы AppMetrica и направляют пользователей сразу в магазин приложений. Без редиректов атрибуция установок не работает.

    {% endnote %}

2. Откройте трекинговую ссылку.
3. Установите приложение из магазина и запустите его. После запуска используйте приложение несколько секунд.

## Шаг 3. Убедитесь, что установка появилась в отчете {#check-the-report}

Установка должна появиться в отчете **User Acquisition**. Информацию по установкам можно посмотреть в веб-интерфейсе:

1. Откройте отчет **User Acquisition**.
2. Выберите трекер, для которого вы тестируете атрибуцию.
3. Убедитесь, что число установок для вашего трекера изменилось.

{% note info %}

Если установка не появилась в отчете сразу, подождите 10–15 минут. Такая задержка возможна, когда серверы AppMetrica испытывают повышенную нагрузку.

{% endnote %}

{{ feedback }}

<a href="../troubleshooting/feedback-new.html">
  <span class="button">Написать в службу поддержки</span>
</a>

{% include notitle [feedback](../_includes/feedback-button.md) %}
