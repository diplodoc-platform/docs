# Создание PDF из документации

Diplodoc позволяет генерировать документацию в формате PDF. Функция подходит для Open Source проектов. Технические писатели могут использовать локальную сборку PDF для проверки верстки перед публикацией.

## Сборка PDF

Для генерации PDF [установите пакет `@diplodoc/pdf-generator`](../settings.md#pdf).

{% list tabs %}

- Локальная сборка

  Используйте команду сборки с флагом `--pdf`.

  Пример:

  ```bash
  yfm -i . -o ./output --pdf
  ```

  - `-i .` — путь к папке с исходными файлами документации. В примере это текущая папка.
  - `-o ./output` — путь к папке, куда будет сохранен результат сборки.


- Настройка .yfm

  В файл конфигурации `.yfm` в корне вашего проекта добавьте параметр:

  ```yaml
  pdf:
    enabled: true
  ```

{% endlist %}


{% note info %}

Для каждого файла оглавления `toc.yaml` формируется отдельный файл `single-page.pdf`. Статьи в PDF идут в том же порядке, что и в оглавлении.

{% endnote %}

## Структура PDF-документа

Сгенерированный документ состоит из трех основных частей:

1. **Титульная страница**

    Cтатьи, которые будут размещены на титульной странице, определяются пользователем через настройку `toc.yaml` по шаблону:

    ```yaml
    pdf:
      startPages:
        ...
        - path-to-page-1.md
        - path-to-page-2.md
        - path-to-page-n.md
        ...
    ```

    Указанные статьи будут находиться в начале документа, перед оглавлением и не продублируются в основном оглавлении PDF.

    {% note warning %}

    Страницы, указанные в секции `pdf.startPages`, не поддерживаются [локализацией `yfm translate`](../tools/docs/translate.md).

    {% endnote %}

    Для отладки отображения титульных страниц можно использовать флаг сборки `--pdf-debug`. Он сгенерирует HTML-версии страниц из `startPages`, чтобы вы могли проверить их верстку в браузере.

1. **Оглавление**

    Оглавление в PDF генерируется автоматически на основе структуры `toc.yaml`. Каждый пункт оглавления — ссылка на соответствующую страницу внутри документа.

    Если пункт оглавления — группа, в PDF он отображается просто как текст заголовка.
    
    Файлы с [атрибутом `hidden: true`](../project/toc.md#hidden) в `toc.yaml` не попадают в PDF-сборку. Это поведение можно изменить [настройкой `hiddenPolicy`](../settings.md#pdf).

1. **Основной контент**

    Основная часть документа поддерживает все стандартные возможности Diplodoc:
    - блоки Page Constructor;
    - перекрестные ссылки;
    - изображения и другие медиа-файлы.

## Стилизация PDF

Внешний вид PDF-документа можно настроить с помощью [кастомных CSS-стилей](../style/css-js.md).

{% note alert %}

Стили, прописанные непосредственно в Markdown-файлах, при генерации PDF будут удалены санитайзером в целях безопасности.

{% endnote %}

## Фильтрация контента

Чтобы отобразить в PDF контент, который должен быть скрыт в HTML-версии, используйте [пресеты](../project/presets.md). Определите переменную, которая будет использоваться в условиях фильтрации контента в `presets.yaml`.

Пример:

```yaml
pdf:
  version: pdf
```

А в тексте документации использовать условие:

```markdown
{% if version == "pdf" %}

Этот текст будет виден только в PDF версии.

{% endif %}
```