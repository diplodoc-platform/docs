# Создание PDF из документации

Diplodoc умеет генерировать документацию в формате PDF. Это пригодится для Open Source проектов или для проверки верстки перед публикацией.

## Сборка PDF

Чтобы сгенерировать PDF, [установите пакет `@diplodoc/pdf-generator`](../settings.md#pdf).

{% list tabs %}

- Локальная сборка

  Запустите сборку с флагом `--pdf`.

  Пример:

  ```bash
  yfm -i . -o ./output --pdf
  ```

  - `-i .` — путь к папке с исходниками. В примере это текущая папка.
  - `-o ./output` — путь к папке, куда сохранится результат.


- Настройка .yfm

  Добавьте в файл конфигурации `.yfm`:

  ```yaml
  pdf:
    enabled: true
  ```

{% endlist %}


{% note info %}

Для каждого файла оглавления `toc.yaml` создается свой `single-page.pdf`. Статьи в PDF идут в том же порядке, что и в оглавлении.

{% endnote %}

## Структура PDF-документа

Документ состоит из трех частей:

1. **Титульная страница**

    Вы можете добавить статьи в начало документа перед оглавлением. Для этого настройте секцию `startPages` в `toc.yaml`:

    ```yaml
    pdf:
      startPages:
        ...
        - path-to-page-1.md
        - path-to-page-2.md
        - path-to-page-n.md
        ...
    ```

    Эти статьи не дублируются в основном оглавлении PDF и находятся в начале документа.

    {% note warning %}

    Страницы из `pdf.startPages` не поддерживают [локализацию через `yfm translate`](../tools/docs/translate.md).

    {% endnote %}

    Чтобы проверить верстку титульных страниц в браузере, используйте флаг `--pdf-debug`. Он сгенерирует HTML-версии страниц из `startPages`.

1. **Оглавление**

    Генерируется автоматически из `toc.yaml`. Каждый пункт — ссылка на страницу.

    Названия разделов, которые содержат группы статей, отображаются в PDF как простой текст.
    
    Файлы с [атрибутом `hidden: true`](../project/toc.md#hidden) в `toc.yaml` не попадают в PDF. Чтобы это изменить, укажите [параметр `hiddenPolicy: false`](../settings.md#pdf).

1. **Основной контент**

    Поддерживаются все возможности Diplodoc:
    - блоки Page Constructor;
    - перекрестные ссылки;
    - изображения и другие медиа-файлы.

## Стилизация PDF

Внешний вид документа можно настроить через [кастомные CSS-стили](../style/css-js.md).

{% note alert %}

Стили внутри Markdown-файлов удаляются при генерации PDF в целях безопасности.

{% endnote %}

## Фильтрация контента

Если нужно показать или скрыть контент только в PDF , используйте [пресеты](../project/presets.md).

1. Определите переменную в `presets.yaml`:

    ```yaml
    pdf:
      version: pdf
    ```

2. Используйте условие в тексте документации:

    ```markdown
    {% if version == "pdf" %}

    Этот текст будет виден только в PDF версии.

    {% endif %}
