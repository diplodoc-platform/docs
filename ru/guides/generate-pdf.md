# Создание PDF из документации

Diplodoc позволяет генерировать документацию в формате PDF. Функция подходит для Open Source проектов. Технические писатели могут использовать локальную сборку PDF для проверки верстки перед публикацией.

## Сборка PDF

Для генерации PDF [установите пакет `@diplodoc/pdf-generator`](../installation.md).

{% list tabs %}

- Локальная сборка

  Используйте команду сборки с флагом `--pdf`.

  Пример:

  ```bash
  yfm -i . -o ./output --pdf
  ```

  - `-i .` — путь к папке с исходными файлами документации. В примере это текущая папка.
  - `-o ./output` — путь к папке, куда будет сохранен результат сборки.


- Настройка .yfm

  В файл конфигурации `.yfm` в корне вашего проекта добавьте параметр:

  ```yaml
  pdf:
    enabled: true
  ```

{% endlist %}


{% note info %}

Для каждого файла оглавления `toc.yaml` формируется отдельный файл `single-page.pdf`. Порядок статей в PDF соответствует порядку статей в оглавлении.

{% endnote %}

## Структура PDF-документа

Сгенерированный документ состоит из трех основных частей:

1. **Титульная страница**

  Cтатьи, которые будут размещены на титульной странице, определяются пользователем через настройку toc.yaml по шаблону:

  ```yaml
  pdf:
    startPages:
      ...
      - path-to-page-1.md
      - path-to-page-2.md
      - path-to-page-n.md
      ...
  ```

  Cтатьи, указанные в `startPages` не дублируются в основном оглавлении PDF, а их контент размещается сразу перед ним.

  {% note warning %}

  Страницы, указанные в секции `pdf.startPages`, не поддерживаются [локализацией `yfm translate`](../tools/docs/translate.md). Подробнее о локализации читайте в разделе [Локализация](../tools/docs/translate.md).

  {% endnote %}

  Для отладки отображения титульных страниц можно использовать флаг сборки `--pdf-debug`. Он сгенерирует HTML-версии страниц из `startPages`, чтобы вы могли проверить их верстку в браузере.

1. **Оглавление**
1. **Основной контент**

### Оглавление

Оглавление в PDF генерируется автоматически на основе структуры вашего `toc.yaml`. Каждый пункт оглавления является ссылкой на соответствующую страницу внутри документа.

*   **Группы статей:** Если пункт оглавления является группой, в PDF он отображается просто как текст заголовка.
*   **Скрытие разделов:** Файлы с атрибутом `hidden: true` в `toc.yaml` не попадают в PDF-сборку. Подробнее о скрытых разделах см. в [документации по оглавлению](../project/toc.md#hidden).

### Контент

Основная часть документа поддерживает все стандартные возможности Diplodoc:
*   Блоки Page Constructor.
*   Перекрестные ссылки.
*   Изображения и другие медиа-файлы.

## Стилизация PDF

Внешний вид PDF-документа можно настроить с помощью кастомных CSS-стилей. Подробнее о подключении стилей читайте в разделе [CSS и JS](../style/css-js.md).

{% note alert %}

Стили, прописанные непосредственно в Markdown-файлах (inline styles), при генерации PDF будут удалены (sanitized) в целях безопасности и единообразия. Используйте внешние CSS-файлы.

{% endnote %}

## FAQ

**В: Как отобразить в PDF контент, который должен быть скрыт в HTML-версии (или наоборот)?**

**О:** Для этого можно использовать механизм [пресетов (presets)](../project/presets.md). Вы можете определить переменную, которая будет использоваться в условиях фильтрации контента.

Например, в `presets.yaml` (или передав через флаг `--varsPreset`):

```yaml
pdf:
  version: pdf
```

А в тексте документации использовать условие:

```markdown
{% if version == "pdf" %}

Этот текст будет виден только в PDF версии.

{% endif %}
