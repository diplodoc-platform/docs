# Создание PDF из документации

Diplodoc может генерировать документацию в формате PDF.

## Структура PDF-документа { #structure }

PDF-документ состоит из трех частей:

1. **Титульные страницы** {#start-pages}

    Отображаются в начале документации и не нумеруются.
    
    Титульные страницы указываются в блоке `startPages` в `toc.yaml`:

    ```yaml
    pdf:
      startPages:
        - path-to-page-1.md
        - path-to-page-2.md
        - path-to-page-n.md
    ```

    {% note warning %}

    Страницы из `pdf.startPages` не поддерживают [локализацию через `yfm translate`](../tools/docs/translate.md).

    {% endnote %}

    При сборке документации титульные страницы не трансформируются в файлы. Для проверки их верстки в браузере, используйте при сборке флаг `--pdf-debug`: он создаст HTML-версии страниц из `startPages`.

1. **Оглавление**

    Diplodoc автоматически формирует оглавление на основе `toc.yaml`. Каждый пункт в списке — это ссылка на страницу.

    Названия разделов, объединяющих группу статей, отображаются простым текстом.
    Файлы с [атрибутом `hidden: true`](../project/toc.md#hidden) в `toc.yaml` не попадают в PDF. Чтобы включить их, установите [параметр `hiddenPolicy: false`](../settings.md#pdf).

1. **Основной контент**

    В PDF поддерживаются все возможности Diplodoc:

    - блоки Page Constructor;
    - перекрестные ссылки;
    - изображения и другие медиа-файлы.

    Каждая следующая статья PDF-документа начинается с новой страницы. Статьи в PDF располагаются в том же порядке, что и в оглавлении.

## Сборка { #build }

### Настройка

1. [Установите пакет `@diplodoc/pdf-generator`](../settings.md#pdf).

1. В файле `toc.yaml` добавьте секцию `startPages` для формирования [титульных страниц](#start-pages).

1. Включите поддержку PDF в файле конфигурации `.yfm`:

    ```yaml
    pdf:
      enabled: true
    ```

### Генерация

1. Соберите проект документации:

    ```bash
    yfm -i . -o ./docs-output --pdf
    ```

    - `-i .` — путь к папке с исходниками (в примере — текущая папка);
    - `-o ./docs-output` — путь к папке для результатов сборки;
    - `--pdf` — флаг, включающий подготовку данных для генерации PDF; если поддержка PDF включена в `.yfm`, флаг передавать не требуется.

1. Запустите генератор PDF:

    ```bash
    npx -- @diplodoc/pdf-generator@latest -i ./docs-output
    ```

{% note info %}

Для каждого файла `toc.yaml` Diplodoc создает отдельный `single-page.pdf`. 

{% endnote %}

## Стилизация { #styles }

Вы можете изменить внешний вид PDF-документа с помощью [CSS-стилей](../style/css-js.md).

{% note alert %}

Стили, добавленные внутри Markdown-файлов, Diplodoc удаляет при генерации PDF — это сделано в целях безопасности.

{% endnote %}

## Фильтрация контента { #filtering }

Чтобы показывать или скрывать элементы только в PDF-версии, используйте [пресеты](../project/presets.md).

1. Добавьте нужную переменную в `presets.yaml`:

    ```yaml
    pdf:
      version: pdf
    ```

2. Используйте условие в тексте:

    ```markdown
    {% if version == "pdf" %}

    Этот текст появится только в PDF-версии.

    {% endif %}
    ```
