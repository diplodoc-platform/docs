# Конфиденциальность приложения в App Store

С 8 декабря 2020 года [Apple требует](https://developer.apple.com/app-store/app-privacy-details/), чтобы разработчики мобильных приложений сообщали в App Store, какие данные они собирают через приложение. Это касается, в том числе, сторонних библиотек, встроенных в приложение.

- Представленный ниже список касается конфигурации AppMetrica SDK по умолчанию. Если вы собираете дополнительные данные или не используете релевантную функциональность, измените набор данных по своему усмотрению.
- AppMetrica SDK осуществляет трекинг, если доступен рекламный идентификатор IDFA. Реализовать [запрос](../mobile-tracking/ios-tracking#request) нужно самостоятельно.

Начиная с весны 2024, Apple предоставляет механизм для автоматического предоставления всей информации о сборе данных и трекинге — [Privacy Manifest](https://developer.apple.com/documentation/bundleresources/privacy_manifest_files). Он может формироваться как самим приложением, так и его компонентами.

- Начиная с версии [5.1.0](../sdk/ios/changelog-ios.md#v-5-1-0), SDK AppMetrica предоставляет все необходимые данные в виде файла Privacy Manifest. Мы рекомендуем обновиться на актуальную версию — тогда данные попадут в манифест приложения автоматически. Если это невозможно, используйте рекомендации ниже для ручного заполнения манифеста.

## Трекинг {#tracking}

[Трекинг](https://developer.apple.com/app-store/user-privacy-and-data-use/) — сопоставление данных, собранных в вашем приложении о конкретном пользователе или устройстве (например, идентификатор пользователя, идентификатор устройства или профиль) с данными третьих сторон с целью рекламы или обмена данными.

По умолчанию AppMetrica SDK предоставляет функции трекинга. Этот факт необходимо отразить в Privacy Manifest в ключе `NSPrivacyTracking` значением `true`.

<!--
> **Примеры трекинга:**
>
> - Целевая реклама в вашем приложении на основе пользовательских данных, собранных с приложений и веб-сайтов других компаний.
> - Передача брокеру данных информации о местоположении устройства или списков электронной почты.
> - Предоставление сторонней рекламной сети доступа к списку электронных писем, рекламных идентификаторов или других идентификаторов для целевой рекламы или привлечения новых пользователей.
> - Размещение в вашем приложении SDK стороннего производителя, который объединяет пользовательские данные из вашего приложения с пользовательскими данными из приложений других разработчиков для таргетирования или измерения эффективности рекламы (даже если вы не используете SDK для этих целей). Например, при входе с пакетом SDK данные из вашего приложения используются для включения целевой рекламы в приложениях других разработчиков. -->

### Трекинговый домен {#track-domain}

Данные, которые используются для трекинга, отправляются на отдельные домены (указываются в Privacy Manifest в ключе `NSPrivacyTrackingDomains`):

* `tracking.appmetrica.yandex.net`;
* `tracking.reserve.appmetrica.yandex.net`.

Согласно политикам Apple, домены будут доступны только у пользователей, которые предоставили разрешение на трекинг.

### Отключение трекинга {#disable-track}

В некоторых случаях вам может потребоваться отключить трекинговые функции, например, при использовании AppMetrica SDK в детских приложениях. Для этого исключите модуль `AppMetricaAdSupport` (модуль используется для сбора идентификаторов, включая IDFA).

> Как [исключить модуль AppMetricaAdSupport](../sdk/ios/analytics/migration-io-5-0-0.md#child) при использовании детских приложений.

Если модуль отключен:

- Ключ `NSPrivacyTracking` принимает значение `false`, трекинговые домены не используются.
- Идентификаторы (`NSPrivacyCollectedDataTypeDeviceID`) не используются для трекинга и назначений `NSPrivacyCollectedDataTypePurposeThirdPartyAdvertising`, `NSPrivacyCollectedDataTypePurposeDeveloperAdvertising`.

  {% note info %}
  
  При ручном заполнении Privacy Manifest исключите их.
  
  {% endnote %}
  
## Типы данных и их использование

Согласно политикам Apple, разработчикам приложений необходимо указать все [типы данных](https://developer.apple.com/documentation/bundleresources/privacy_manifest_files/describing_data_use_in_privacy_manifests), используемые приложением, а также назначение их использования.

AppMetrica SDK использует некоторые из них:

#|
|| **Тип данных** | **Значение** | **Использование** | **Трекинг** | **Связано с пользователем** | **Назначение** ||
|| Локация | `NSPrivacyCollectedDataTypePreciseLocation` | Опционально[*](*location) | Нет | Нет | `NSPrivacyCollectedDataTypePurposeAppFunctionality` ||
|| Локация | `NSPrivacyCollectedDataTypeCoarseLocation` | Опционально[*](*location) | Нет | Нет | `NSPrivacyCollectedDataTypePurposeAnalytics` ||
|| Идентификаторы | `NSPrivacyCollectedDataTypeUserID` | Опционально[*](*id-user) | Нет | Нет | `NSPrivacyCollectedDataTypePurposeAnalytics` ||
|| Идентификаторы | `NSPrivacyCollectedDataTypeDeviceID` | Да[*](*id-device) | Да | Да |
* `NSPrivacyCollectedDataTypePurposeThirdPartyAdvertising`
* `NSPrivacyCollectedDataTypePurposeDeveloperAdvertising`
* `NSPrivacyCollectedDataTypePurposeAnalytics` ||
|| Покупки | `NSPrivacyCollectedDataTypePurchaseHistory` | Да[*](*purchase) | Нет | Нет | `NSPrivacyCollectedDataTypePurposeAnalytics` ||
|| Данные об использовании | `NSPrivacyCollectedDataTypeProductInteraction` | Да | Нет | Нет | `NSPrivacyCollectedDataTypePurposeAnalytics` ||
|| Диагностика | `NSPrivacyCollectedDataTypeCrashData` | Да | Нет | Нет | `NSPrivacyCollectedDataTypePurposeAppFunctionality` ||
|| Диагностика | `NSPrivacyCollectedDataTypePerformanceData` | Да | Нет | Нет | `NSPrivacyCollectedDataTypePurposeAppFunctionality` ||
|| Диагностика | `NSPrivacyCollectedDataTypeOtherDiagnosticData` | Да | Нет | Нет | `NSPrivacyCollectedDataTypePurposeAnalytics` ||
|| Другие типы данных | `NSPrivacyCollectedDataTypeOtherDataTypes` | Да[*](*other-data) | Нет | Нет |
* `NSPrivacyCollectedDataTypePurposeAnalytics`
* `NSPrivacyCollectedDataTypePurposeAppFunctionality` ||
|#

{% note info %}

Если вы используете или передаете в AppMetrica прочие данные из [полного списка](https://developer.apple.com/documentation/bundleresources/privacy_manifest_files/describing_data_use_in_privacy_manifests) — задекларируйте их самостоятельно.

  {% cut "Пример" %}

  <img src="https://yastatic.net/s3/doc-binary/src/dev/appmetrica/en/images/data-security/privacy.jpeg">

  {% endcut %}

{% endnote %}

## Приватные API

Согласно политике Apple, некоторые [системные методы API](https://developer.apple.com/documentation/bundleresources/privacy_manifest_files/describing_use_of_required_reason_api) разрешается использовать для строго определенных сценариев. Факт использования и причину необходимо указать в Privacy Manifest.

AppMetrica SDK использует следующие из них:

#|
|| **NSPrivacyAccessedAPIType** | **NSPrivacyAccessedAPITypeReasons** | **Комментарий** ||
|| `NSPrivacyAccessedAPICategoryUserDefaults` | CA92.1 | Чтение и хранение данных, необходимых для функционирования SDK. ||
|| `NSPrivacyAccessedAPICategoryFileTimestamp` | C617.1 | Чтение данных, необходимых для функционирования SDK. ||
|#

{% note info %}

Если вы используете другие API, задекларируйте их дополнительно.

{% endnote %}

<!-- ## Типы данных {#data-types}

Ознакомьтесь со списком типов данных ниже и сравните их с методами сбора данных в вашем приложении:

#|
|| **Тип данных** | **Описание** | **Сбор данных AppMetrica SDK (конфигурация по умолчанию)** ||
|| **Контактная информация** ||
|| Имя | Имя или фамилия. | Нет ||
|| Адрес электронной почты | Включая хэшированный адрес электронной почты. | Нет ||
|| Номер телефона | Включая хэшированный номер телефона. | Нет ||
|| Физический адрес | Домашний, физический или почтовый адрес. | Нет ||
|| Другая контактная информация пользователя. | Любая другая информация, которая может быть использована для связи с пользователем вне приложения. | Нет ||
|| **Здоровье и фитнес** ||
|| Здоровье | Данные о состоянии здоровья и медицинские данные. | Нет ||
|| Фитнес | Данные о физической форме и упражнениях. | Нет ||
|| **Финансовая информация** ||
|| Информация об оплате | Например, форма оплаты, номер платежной карты или номер банковского счета. Если приложение использует сервис для оплаты, информация об оплате вводится за пределами приложения и разработчик не имеет к ней доступа. Такая информация не собирается и ее не нужно раскрывать. | Нет ||
|| Информация о кредите | Например, кредитный рейтинг. | Нет ||
|| Другая финансовая информация | Например, доход, активы, зарплата, долги или любая другая финансовая информация. | Нет ||
|| **Геолокация** ||
|| Точная геолокация | Информация о местоположении пользователя или устройства с тем же или большим разрешением, что и широта и долгота, с тремя или более знаками после запятой .| Да, если включена опция `locationTracking` и получено разрешение от пользователя. [Запрос на разрешение](https://developer.apple.com/documentation/corelocation/cllocationmanager?language=objc) нужно реализовать самостоятельно. ||
|| Приблизительная геолокация | Информация о местоположении пользователя или устройства с меньшим разрешением, чем широта и долгота, с тремя или более десятичными знаками. Например, службы приблизительного определения местоположения. | Да, если включена опция `locationTracking` и получено разрешение от пользователя. [Запрос на разрешение](https://developer.apple.com/documentation/corelocation/cllocationmanager?language=objc) нужно реализовать самостоятельно. ||
|| **Конфиденциальная информация** ||
|| Конфиденциальные данные | Например, расовые или этнические данные, религиозные или философские убеждения, сексуальная ориентация, членство в профсоюзах, политические убеждения, информация о беременности или родах, инвалидность, генетическая информация или биометрические данные. | Нет ||
|| **Контакты** ||
|| Контакты | Например, список контактов в телефоне пользователя, адресная книга или социальная сеть. | Нет ||
|| **Пользовательский контент** ||
|| Электронные письма или текстовые сообщения | Включая строку темы, отправителя, получателей и содержимое электронного письма или сообщения. | Нет ||
|| Фотографии или видео | Фотографии или видео пользователя. | Нет ||
|| Аудиоданные | Голос пользователя или звуковые записи. | Нет ||
|| Игровой контент | Например, логика многопользовательской игры или игрового процесса, сохраненные игры, пользовательский контент в игре. | Нет ||
|| Служба поддержки пользователей | Данные, полученные пользователем во время запроса в службу поддержки. | Нет ||
|| Другой пользовательский контент | Любой другой пользовательский контент. | Нет ||
|| **История просмотров** ||
|| История просмотров | Информация о просмотрах контента, который не является частью приложения. Например, веб-сайты. | Нет ||
|| **История поиска** ||
|| История поиска | Информация о поиске через приложение. | Нет ||
|| **Идентификаторы** ||
|| ID пользователя | Например, имя пользователя, псевдоним, ID учетной записи, ID пользователя, клиентский номер или другой ID пользователя или учетной записи, который можно использовать для идентификации конкретного пользователя или учетной записи. | Нет

По желанию разработчик приложения может настроить передачу этих данных. ||
|| ID устройства | Например, рекламный идентификатор или другой ID устройства. | Да, если есть разрешение пользователя. [Запрос на разрешение](../mobile-tracking/ios-tracking.md) нужно реализовать самостоятельно. ||
|| **Покупки** ||
|| История покупок | Покупки или тенденции покупок от имени учетной записи или отдельного пользователя. | Да, начиная с версий SDK 4.0.0+

По желанию разработчик приложения может отключить передачу этих данных, используя свойство `revenueAutoTrackingEnabled`. ||
|| **Данные об использовании** ||
|| Взаимодействие с продуктом | Например, информация о запусках приложения, нажатиях, прокрутке и касаниях, данные о прослушивании музыки и просмотрах видео, местах сохранения в игре, видео или песнях, а также другая информация о взаимодействии пользователя с приложением. | Да, если речь идет о событии запуска. В остальных случаях — нет.

По желанию разработчик может полностью отключить автоматическое отслеживание сессий `sessionsAutoTracking` и [отслеживать сессии вручную](../sdk/ios/analytics/ios-listen.md). ||
|| Данные о рекламе | Информация о рекламе, которую просматривал пользователь.| Нет

По желанию разработчик приложения может настроить передачу этих данных. ||
|| Другие данные об использовании | Любые другие данные об активности пользователя в приложении. | Нет ||
|| **Диагностика** ||
|| Данные о сбоях | Например, журналы сбоев. | Нет ||
|| Данные о производительности | Например, время запуска, частота зависания или потребление энергии. | Да

AppMetrica может собирать данные об уровне заряда батареи для крэш-аналитики. ||
|| Другие данные диагностики | Любые другие данные о технической диагностике, связанные с приложением. | Нет ||
|| **Другие данные** ||
|| Другие типы данных | Любые другие не упомянутые типы данных. | Да

AppMetrica может собирать дополнительные данные. Например, техническую информацию об устройстве: версия операционной системы, тип экрана и тому подобное. ||
|#

## Использование данных {#data-use}

Выберите категории, которые соответствуют использованию данных в вашем приложении:

| Цель | Определение |
| ---- | ------- |
| Сторонняя реклама | Показ сторонних объявлений в вашем приложении или обмен данными с организациями, которые показывают стороннюю рекламу. |
| Реклама или маркетинг разработчика | Показ вашей рекламы в приложении, отправка маркетинговых сообщений непосредственно вашим пользователям или обмен данными с организациями, которые будут показывать вашу рекламу. |
| Аналитика | Использование данных для оценки поведения пользователей, понимания эффективности существующих функций продукта, планирования новых функций или измерения размера или характеристик аудитории. |
| Персонализация продукта | Настройка того, что видит пользователь. Например списка рекомендуемых продуктов, сообщений или предложений. |
| Функциональность приложения | Например, для аутентификации пользователя, включения функций, предотвращения мошенничества, внедрения мер безопасности, обеспечения бесперебойной работы сервера, минимизации сбоев приложений, повышения масштабируемости и производительности или поддержки пользователей. |
| Другие цели | Любые другие не упомянутые цели. |

## Данные, связанные с пользователем {#data-linked}

{% note info %}

Личная информация и персональные данные считаются связанными с пользователем.

{% endnote %}

Определите, связан ли каждый тип данных с идентификатором пользователя (через его учетную запись, устройство или другие данные). Сбор информации через приложение часто связан с личными данными пользователя, если не предусмотрены специальные меры защиты конфиденциальности:

- Удаление информации о любых прямых идентификаторах, таких как идентификатор пользователя или его имя, перед сбором данных.
- Обработка данных для разрыва связи и предотвращения повторной связи с реальными идентификаторами.

Чтобы данные не были связаны с личностью конкретного пользователя, избегайте определенных действий после сбора:

- Не связывайте данные с идентификатором пользователя.
- Не привязывайте данные к другим наборам данных, которые могут связать их с идентификатором конкретного пользователя.

## Трекинг {#tracking}

Трекинг — это сопоставление данных, собранных в вашем приложении о конкретном пользователе или устройстве (например, идентификатор пользователя, идентификатор устройства или профиль) с данными третьих сторон с целью рекламы или обмена данными.

Примеры трекинга:

- Целевая реклама в вашем приложении на основе пользовательских данных, собранных с приложений и веб-сайтов других компаний.
- Передача брокеру данных информации о местоположении устройства или списков электронной почты.
- Предоставление сторонней рекламной сети доступа к списку электронных писем, рекламных идентификаторов или других идентификаторов для целевой рекламы или привлечения новых пользователей.
- Размещение в вашем приложении SDK стороннего производителя, который объединяет пользовательские данные из вашего приложения с пользовательскими данными из приложений других разработчиков для таргетирования или измерения эффективности рекламы (даже если вы не используете SDK для этих целей). Например, при входе с пакетом SDK данные из вашего приложения используются для включения целевой рекламы в приложениях других разработчиков. -->

{{ feedback }}

<a href="../troubleshooting/feedback-new.html">
  <span class="button">Написать в службу поддержки</span>
</a>

{% include notitle [feedback](../_includes/feedback-button.md) %}

[*location]: \* Данные геолокации используются, если явно включить опцию `locationTracking` и получено разрешение от пользователя. [Запрос на разрешение](https://developer.apple.com/documentation/corelocation/cllocationmanager?language=objc) нужно реализовать самостоятельно.

[*id-user]: \* Идентификатор пользователя (`NSPrivacyCollectedDataTypeUserID`) используется, если вы настроили отправку `ProfileID`.

[*id-device]: \* Идентификаторы устройства (`NSPrivacyCollectedDataTypeDeviceID`) используются по умолчанию, если получено разрешение пользователя. [Запрос на разрешение](https://developer.apple.com/documentation/apptrackingtransparency/) нужно реализовать самостоятельно.

[*purchase]: \* История покупок (`NSPrivacyCollectedDataTypePurchaseHistory`) используется по умолчанию, начиная с версий SDK 4.0.0. Отключить передачу этих данных можно, используя свойство `revenueAutoTrackingEnabled`.

[*other-data]: \* Под другими данными (`NSPrivacyCollectedDataTypeOtherDataTypes`) подразумевается общая информация об устройстве, например, версия операционной системы, разрешение экрана и тому подобное.
