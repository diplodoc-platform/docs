<!DOCTYPE html>
<html lang="ru" dir="ltr">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <base href="../../" />
        <title>Diplodoc v5.0: Новый уровень производительности | Diplodoc</title>
        <meta name="generator" content="Diplodoc Platform v5.0.12">
        
        <style type="text/css">html, body {min-height:100vh; height:100vh;}</style>
        <link rel="icon" type="image/x-icon" href="https://storage.yandexcloud.net/diplodoc-www-assets/favicon/favicon.ico">
        
        <link type="text/css" rel="stylesheet" href="_bundle/vendor.css"/>
        <link type="text/css" rel="stylesheet" href="_bundle/app.css"/>
    </head>
    <body class="g-root g-root_theme_light">
        <div id="root"></div>
        <script type="application/json" id="diplodoc-state">
            {"data":{"leading":false,"html":"&lt;h2 id=\"osnovnye-uluchsheniya\"&gt;&lt;a href=\"ru/releases/v5.html#osnovnye-uluchsheniya\" class=\"yfm-anchor\" aria-hidden=\"true\"&gt;&lt;span class=\"visually-hidden\" data-no-index=\"true\"&gt;Основные улучшения&lt;/span&gt;&lt;/a&gt;Основные улучшения&lt;/h2&gt;\n&lt;h3 id=\"optimizaciya-proizvoditelnosti\"&gt;&lt;a href=\"ru/releases/v5.html#optimizaciya-proizvoditelnosti\" class=\"yfm-anchor\" aria-hidden=\"true\"&gt;&lt;span class=\"visually-hidden\" data-no-index=\"true\"&gt;Оптимизация производительности&lt;/span&gt;&lt;/a&gt;Оптимизация производительности&lt;/h3&gt;\n&lt;ul&gt;\n&lt;li&gt;Значительное ускорение работы CLI-инструментов (базовое ускорение в 3 раза)&lt;/li&gt;\n&lt;li&gt;Многопоточная обработка документов с ускорением до 10 раз на многоядерных системах&lt;/li&gt;\n&lt;li&gt;Кэширование и оптимизация загрузки ресурсов&lt;/li&gt;\n&lt;li&gt;Оптимизированная обработка больших проектов&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;Сравнения со старой версией:&lt;br /&gt;\n&lt;img src=\"ru/releases/_assets/speed.png\" alt=\"\" /&gt;&lt;/p&gt;\n&lt;p&gt;Мы вели постепенные улучшения производительности начиная с версии 4.39 и теперь готовы анонсировать результат. Нам удалось достичь базового ускорения в три раза благодаря оптимизации алгоритмов обработки документов, улучшению кэширования и более эффективному использованию ресурсов. Также мы добавили параллельную обработку документов, которая дополнительно ускоряет сборку в зависимости от числа ядер в системе. В некоторых случаях, особенно при работе с большими проектами на многоядерных серверах, мы наблюдали ускорение в 10 раз. Это значительное улучшение позволяет разработчикам быстрее получать результаты сборки и эффективнее работать с документацией.&lt;/p&gt;\n&lt;p&gt;Наша система теперь эффективно обрабатывает документацию из более чем 50 тысяч статей, включая отдельные статьи, содержащие более 10 МБ текста и разметки. Это позволяет использовать Diplodoc для создания и поддержки масштабных документационных проектов без потери производительности.&lt;/p&gt;\n&lt;h3 id=\"extension-api-i-sistema-hukov\"&gt;&lt;a href=\"ru/releases/v5.html#extension-api-i-sistema-hukov\" class=\"yfm-anchor\" aria-hidden=\"true\"&gt;&lt;span class=\"visually-hidden\" data-no-index=\"true\"&gt;Extension API и система хуков&lt;/span&gt;&lt;/a&gt;Extension API и система хуков&lt;/h3&gt;\n&lt;p&gt;&lt;a href=\"ru/dev/extensions-api.html\"&gt;Документация&lt;/a&gt;&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;Новая система расширений для разработчиков с полной поддержкой TypeScript&lt;/li&gt;\n&lt;li&gt;Встроенная система хуков для расширения функциональности на различных этапах&lt;/li&gt;\n&lt;li&gt;Модульный дизайн для создания независимых, переиспользуемых расширений&lt;/li&gt;\n&lt;li&gt;Документированный API для создания плагинов и интеграций&lt;/li&gt;\n&lt;li&gt;Примеры интеграции с популярными инструментами&lt;/li&gt;\n&lt;li&gt;Гибкая система управления жизненным циклом расширений&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;Мы уже разработали несколько расширений на новой системе, которые можно использовать в качестве примеров для создания собственных расширений:&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;\n&lt;p&gt;&lt;strong&gt;GenericIncluder&lt;/strong&gt; - расширение для автоматической генерации оглавления (TOC). Анализирует файловую систему, находит Markdown-файлы и автоматически создает структуру оглавления на основе их расположения и содержимого. При формировании оглавления учитывает заголовок файла и его вес, указанные в frontmatter, что позволяет гибко настраивать структуру документации. Это значительно упрощает организацию больших документационных проектов.&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;&lt;strong&gt;GithubVcsConnector&lt;/strong&gt; - расширение для сбора информации о контрибьюторах и авторах статей из GitHub. Собирает метаданные о коммитах, авторах и контрибьюторах, которые затем могут быть отображены в интерфейсе документации. Это позволяет пользователям видеть, кто и когда внес изменения в документацию, повышая прозрачность процесса разработки и признавая вклад сообщества.&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;&lt;strong&gt;AlgoliaSearch&lt;/strong&gt; - интеграция с Algolia для обеспечения полнотекстового поиска. Автоматически индексирует контент документации в Algolia, настраивает поисковые подсказки и фильтры, а также обеспечивает быстрый и релевантный поиск по всей документации с поддержкой различных языков.&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;&lt;strong&gt;LocalSearch&lt;/strong&gt; - расширение для локального поиска по документации с использованием библиотеки lunr.js. Создает поисковый индекс на стороне клиента, что позволяет осуществлять быстрый поиск без необходимости подключения к внешним сервисам. Поддерживает нечеткий поиск, поиск по фразам и ранжирование результатов по релевантности. Особенно полезно для проектов, требующих работы в офлайн-режиме или с ограничениями по конфиденциальности данных.&lt;/p&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;Эти расширения демонстрируют различные возможности новой системы расширений и могут служить отправной точкой для разработки собственных плагинов. Каждое из них реализует свой набор хуков и использует различные аспекты API расширений.&lt;/p&gt;\n&lt;h3 id=\"uluchshennaya-sistema-oglavleniya-toc\"&gt;&lt;a href=\"ru/releases/v5.html#uluchshennaya-sistema-oglavleniya-toc\" class=\"yfm-anchor\" aria-hidden=\"true\"&gt;&lt;span class=\"visually-hidden\" data-no-index=\"true\"&gt;Улучшенная система оглавления (TOC)&lt;/span&gt;&lt;/a&gt;Улучшенная система оглавления (TOC)&lt;/h3&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Расширенная поддержка шаблонизации переменными для полей &lt;code&gt;href&lt;/code&gt; и &lt;code&gt;label&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;Автоматическое извлечение заголовков из файлов для поля &lt;code&gt;name&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;Улучшенная обработка includes в TOC с более аккуратной работой с файловой системой&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;Мы значительно улучшили систему оглавления (TOC), сделав её более гибкой и удобной в использовании. Теперь больше полей поддерживают шаблонизацию переменными, что позволяет динамически формировать ссылки и метки. Поле &lt;code&gt;name&lt;/code&gt; теперь может автоматически извлекать заголовок из файла, на который ссылается элемент оглавления, что упрощает поддержку документации в актуальном состоянии. Также мы улучшили обработку includes в TOC, сделав её более аккуратной при работе с файловой системой, что особенно важно для больших проектов с множеством вложенных директорий.&lt;/p&gt;\n&lt;h3 id=\"sistema-redirektov\"&gt;&lt;a href=\"ru/releases/v5.html#sistema-redirektov\" class=\"yfm-anchor\" aria-hidden=\"true\"&gt;&lt;span class=\"visually-hidden\" data-no-index=\"true\"&gt;Система редиректов&lt;/span&gt;&lt;/a&gt;Система редиректов&lt;/h3&gt;\n\n&lt;p&gt;При разработке Extension API мы осознали необходимость выделения в системе новой функциональности - работы с редиректами. По умолчанию мы реализовали простейшую систему редиректов с файла на файл, которая работает на базе браузерных редиректов. Для более сложных сценариев, когда требуется генерация конфигураций для nginx или других прокси-серверов, в системе добавлен набор хуков для удобной работы с редиректами. Это дает возможность расширить функциональность работы с редиректами с помощью внешних расширений на основе Extension API.&lt;/p&gt;\n&lt;h3 id=\"uluchshennaya-sistema-konfiguracii\"&gt;&lt;a href=\"ru/releases/v5.html#uluchshennaya-sistema-konfiguracii\" class=\"yfm-anchor\" aria-hidden=\"true\"&gt;&lt;span class=\"visually-hidden\" data-no-index=\"true\"&gt;Улучшенная система конфигурации&lt;/span&gt;&lt;/a&gt;Улучшенная система конфигурации&lt;/h3&gt;\n&lt;p&gt;Мы систематизировали параметры запуска для более интуитивного использования. Раньше у нас было несколько \"выключающих\" параметров, которые было сложно запомнить: &lt;code&gt;--disableLiquid&lt;/code&gt;, &lt;code&gt;--lintDisabled&lt;/code&gt;, &lt;code&gt;--buildDisabled&lt;/code&gt;, &lt;code&gt;--needToSanitizeHtml&lt;/code&gt;. Мы убрали лишние параметры, а оставшиеся привели к единой системе именования:&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;code&gt;--disableLiquid&lt;/code&gt; → &lt;code&gt;--no-template&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;--lintDisabled&lt;/code&gt; → &lt;code&gt;--no-lint&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;--needToSanitizeHtml false&lt;/code&gt; → &lt;code&gt;--no-sanitize-html&lt;/code&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;Такая систематизация делает интерфейс командной строки более понятным и предсказуемым для пользователей.&lt;/p&gt;\n&lt;p&gt;Также мы синхронизировали настройку сборки проекта через параметры командной строки и через файл конфигурации. Теперь для всех основных параметров в файле конфигурации есть соответствующий параметр командной строки. Это позволило добавить новые параметры:&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;code&gt;--langs&lt;/code&gt; - управление языками документации&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;--search&lt;/code&gt; - настройка параметров поиска&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;--changelogs&lt;/code&gt; - управление списком изменений&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;--mtimes&lt;/code&gt; - настройка временных меток&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;Подробнее в обновленном разделе &lt;a href=\"ru/settings.html\"&gt;Настройки YFM-проекта&lt;/a&gt;&lt;/p&gt;\n&lt;h3 id=\"nebolshie-tehnicheskie-uluchsheniya\"&gt;&lt;a href=\"ru/releases/v5.html#nebolshie-tehnicheskie-uluchsheniya\" class=\"yfm-anchor\" aria-hidden=\"true\"&gt;&lt;span class=\"visually-hidden\" data-no-index=\"true\"&gt;Небольшие технические улучшения&lt;/span&gt;&lt;/a&gt;Небольшие технические улучшения&lt;/h3&gt;\n&lt;ul&gt;\n&lt;li&gt;Разводящие страницы полностью поддерживают frontmatter, что позволяет настраивать их метаданные и поведение&lt;/li&gt;\n&lt;li&gt;Использование Latex и Mermaid синтаксиса больше не требует флаг &lt;code&gt;--allow-custom-resources&lt;/code&gt;, эти функции теперь доступны по умолчанию&lt;/li&gt;\n&lt;li&gt;Более безопасная работа с файловой системой - закрыт ряд уязвимостей, позволявших обратиться к файлам за пределами проекта&lt;/li&gt;\n&lt;/ul&gt;\n","meta":{"metadata":[{"name":"generator","content":"Diplodoc Platform v5.0.12"}]},"headings":[{"title":"Основные улучшения","href":"ru/releases/v5.html#osnovnye-uluchsheniya","level":2,"items":[{"title":"Оптимизация производительности","href":"ru/releases/v5.html#optimizaciya-proizvoditelnosti","level":3},{"title":"Extension API и система хуков","href":"ru/releases/v5.html#extension-api-i-sistema-hukov","level":3},{"title":"Улучшенная система оглавления (TOC)","href":"ru/releases/v5.html#uluchshennaya-sistema-oglavleniya-toc","level":3},{"title":"Система редиректов","href":"ru/releases/v5.html#sistema-redirektov","level":3},{"title":"Улучшенная система конфигурации","href":"ru/releases/v5.html#uluchshennaya-sistema-konfiguracii","level":3},{"title":"Небольшие технические улучшения","href":"ru/releases/v5.html#nebolshie-tehnicheskie-uluchsheniya","level":3}]}],"title":"Diplodoc v5.0: Новый уровень производительности"},"router":{"pathname":"ru/releases/v5","depth":3,"base":"../../"},"lang":"ru","langs":["en","ru"],"viewerInterface":{"favicon-src":"https://storage.yandexcloud.net/diplodoc-www-assets/favicon/favicon.ico"}}
        </script>
        <script type="application/javascript">
            const data = document.querySelector('script#diplodoc-state');
            window.__DATA__ = JSON.parse((function unescape(string) {
                return string.replace(/&lt;/g, "<").replace(/&gt;/g, ">").replace(/&amp;/g, "&");
              })(data.innerText));
            window.STATIC_CONTENT = false;
        </script>
        <script type="application/javascript" defer src="ru/toc.js"></script>
        <script type="application/javascript" defer src="_bundle/react.js"></script>
        <script type="application/javascript" defer src="_bundle/app.js"></script>
        <script type="application/javascript" defer src="_bundle/vendor.js"></script>
        
    </body>
</html>