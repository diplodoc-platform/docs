# App privacy in the App Store

As of December 8, 2020, [Apple requires](https://developer.apple.com/app-store/app-privacy-details/) mobile app developers to report the data types collected by their app to the App Store. This concerns, among others, third-party libraries integrated into the app.

- The list below refers to the default AppMetrica SDK configuration. If you collect additional data or don't use the relevant features, modify the dataset as you see appropriate.
- The AppMetrica SDK performs tracking if the IDFA is available. You need to implement the [request](../mobile-tracking/ios-tracking#request) yourself.

As of spring 2024, Apple provides a mechanism for automatic supply of all data collection and tracking information, the [privacy manifest](https://developer.apple.com/documentation/bundleresources/privacy_manifest_files). The manifest file can be generated by the app itself or by its components.

- Starting with version [5.1.0](../sdk/ios/changelog-ios.md#v-5-1-0), the AppMetrica SDK provides all the necessary data as a privacy manifest file. We recommend upgrading to the latest SDK version to have the required data automatically added to your app's manifest. If this is impossible, use the recommendations below to manually fill out the manifest file.

## Tracking {#tracking}

[Tracking](https://developer.apple.com/app-store/user-privacy-and-data-use/) refers to the act of linking user or device data (IDs, profiles) collected from your app with third-party data for the purpose of advertising or data sharing.

By default, the AppMetrica SDK provides a tracking function. This must be reflected in the privacy manifest: `NSPrivacyTracking` must be set to `true`.

<!--
> **Примеры трекинга:**
>
> - Целевая реклама в вашем приложении на основе пользовательских данных, собранных с приложений и веб-сайтов других компаний.
> - Передача брокеру данных информации о местоположении устройства или списков электронной почты.
> - Предоставление сторонней рекламной сети доступа к списку электронных писем, рекламных идентификаторов или других идентификаторов для целевой рекламы или привлечения новых пользователей.
> - Размещение в вашем приложении SDK стороннего производителя, который объединяет пользовательские данные из вашего приложения с пользовательскими данными из приложений других разработчиков для таргетирования или измерения эффективности рекламы (даже если вы не используете SDK для этих целей). Например, при входе с пакетом SDK данные из вашего приложения используются для включения целевой рекламы в приложениях других разработчиков. -->

### Tracking domain {#track-domain}

The data used for tracking is sent to individual domains (specified in the `NSPrivacyTrackingDomains` key in the privacy manifest file):

* `tracking.appmetrica.yandex.net`.
* `tracking.reserve.appmetrica.yandex.net`.

According to the Apple policies, network requests to these domains will fail if the user hasn't granted tracking permission.

### Disabling tracking {#disable-track}

In some cases, you may need to disable the tracking functionality, such as when using the AppMetrica SDK in children's apps. To do this, exclude the `AppMetricaAdSupport` module responsible for the collection of IDs (including IDFAs).

> How to [exclude the "AppMetricaAdSupport" module](../sdk/ios/analytics/migration-io-5-0-0.md#child) when using children's apps.

If the module is disabled:

- The `NSPrivacyTracking` key takes the `false` value, tracking domains aren't used.
- IDs (`NSPrivacyCollectedDataTypeDeviceID`) aren't used for tracking and the `NSPrivacyCollectedDataTypePurposeThirdPartyAdvertising` and `NSPrivacyCollectedDataTypePurposeDeveloperAdvertising` purposes.

   {% note info %}

   Exclude them when manually filling out the privacy manifest file.

   {% endnote %}

## Data types and their usage

The Apple policies require app developers to specify all [data types](https://developer.apple.com/documentation/bundleresources/privacy_manifest_files/describing_data_use_in_privacy_manifests) used by the app and the purpose of their usage.

The AppMetrica SDK uses some of them:

#|
|| **Data type** | **Value** | **Usage** | **Tracking** | **Linked to users** | **Purpose** ||
|| Location | `NSPrivacyCollectedDataTypePreciseLocation` | Optional[*](*location) | No | No | `NSPrivacyCollectedDataTypePurposeAppFunctionality` ||
|| Location | `NSPrivacyCollectedDataTypeCoarseLocation` | Optional[*](*location) | No | No | `NSPrivacyCollectedDataTypePurposeAnalytics` ||
|| IDs | `NSPrivacyCollectedDataTypeUserID` | Optional[*](*id-user) | No | No | `NSPrivacyCollectedDataTypePurposeAnalytics` ||
|| IDs | `NSPrivacyCollectedDataTypeDeviceID` | Yes[*](*id-device) | Yes | Yes |
* `NSPrivacyCollectedDataTypePurposeThirdPartyAdvertising`
* `NSPrivacyCollectedDataTypePurposeDeveloperAdvertising`
* `NSPrivacyCollectedDataTypePurposeAnalytics` ||
   || Purchases | `NSPrivacyCollectedDataTypePurchaseHistory` | Yes[*](*purchase) | No | No | `NSPrivacyCollectedDataTypePurposeAnalytics` ||
   || Usage data | `NSPrivacyCollectedDataTypeProductInteraction` | Yes | No | No | `NSPrivacyCollectedDataTypePurposeAnalytics` ||
   || Diagnostics | `NSPrivacyCollectedDataTypeCrashData` | Yes | No | No | `NSPrivacyCollectedDataTypePurposeAppFunctionality` ||
   || Diagnostics | `NSPrivacyCollectedDataTypePerformanceData` | Yes | No | No | `NSPrivacyCollectedDataTypePurposeAppFunctionality` ||
   || Diagnostics | `NSPrivacyCollectedDataTypeOtherDiagnosticData` | Yes | No | No | `NSPrivacyCollectedDataTypePurposeAnalytics` ||
   || Other data types | `NSPrivacyCollectedDataTypeOtherDataTypes` | Yes[*](*other-data) | No | No |
* `NSPrivacyCollectedDataTypePurposeAnalytics`
* `NSPrivacyCollectedDataTypePurposeAppFunctionality` ||
   |#

{% note info %}

If you use or pass other data from the [full list](https://developer.apple.com/documentation/bundleresources/privacy_manifest_files/describing_data_use_in_privacy_manifests) to AppMetrica, you need to declare it on your own end.

{% cut "Example" %}

<img src="https://yastatic.net/s3/doc-binary/src/dev/appmetrica/en/images/data-security/privacy.jpeg">

{% endcut %}

{% endnote %}

## Private APIs

According to the Apple policy, some [system API methods](https://developer.apple.com/documentation/bundleresources/privacy_manifest_files/describing_use_of_required_reason_api) may only be used in strictly defined scenarios. Their usage and the reasoning behind it must be specified in the privacy manifest file.

The AppMetrica SDK uses the following keys:

#|
|| **NSPrivacyAccessedAPIType** | **NSPrivacyAccessedAPITypeReasons** | **Comment** ||
|| `NSPrivacyAccessedAPICategoryUserDefaults` | CA92.1 | Reading and storing the data required for the SDK to function. ||
|| `NSPrivacyAccessedAPICategoryFileTimestamp` | C617.1 | Reading the data required for the SDK to function. ||
|#

{% note info %}

If you use other APIs, declare them manually.

{% endnote %}

<!-- ## Типы данных {#data-types}

Ознакомьтесь со списком типов данных ниже и сравните их с методами сбора данных в вашем приложении:

#|
|| **Тип данных** | **Описание** | **Сбор данных AppMetrica SDK (конфигурация по умолчанию)** ||
|| **Контактная информация** ||
|| Имя | Имя или фамилия. | Нет ||
|| Адрес электронной почты | Включая хэшированный адрес электронной почты. | Нет ||
|| Номер телефона | Включая хэшированный номер телефона. | Нет ||
|| Физический адрес | Домашний, физический или почтовый адрес. | Нет ||
|| Другая контактная информация пользователя. | Любая другая информация, которая может быть использована для связи с пользователем вне приложения. | Нет ||
|| **Здоровье и фитнес** ||
|| Здоровье | Данные о состоянии здоровья и медицинские данные. | Нет ||
|| Фитнес | Данные о физической форме и упражнениях. | Нет ||
|| **Финансовая информация** ||
|| Информация об оплате | Например, форма оплаты, номер платежной карты или номер банковского счета. Если приложение использует сервис для оплаты, информация об оплате вводится за пределами приложения и разработчик не имеет к ней доступа. Такая информация не собирается и ее не нужно раскрывать. | Нет ||
|| Информация о кредите | Например, кредитный рейтинг. | Нет ||
|| Другая финансовая информация | Например, доход, активы, зарплата, долги или любая другая финансовая информация. | Нет ||
|| **Геолокация** ||
|| Точная геолокация | Информация о местоположении пользователя или устройства с тем же или большим разрешением, что и широта и долгота, с тремя или более знаками после запятой .| Да, если включена опция `locationTracking` и получено разрешение от пользователя. [Запрос на разрешение](https://developer.apple.com/documentation/corelocation/cllocationmanager?language=objc) нужно реализовать самостоятельно. ||
|| Приблизительная геолокация | Информация о местоположении пользователя или устройства с меньшим разрешением, чем широта и долгота, с тремя или более десятичными знаками. Например, службы приблизительного определения местоположения. | Да, если включена опция `locationTracking` и получено разрешение от пользователя. [Запрос на разрешение](https://developer.apple.com/documentation/corelocation/cllocationmanager?language=objc) нужно реализовать самостоятельно. ||
|| **Конфиденциальная информация** ||
|| Конфиденциальные данные | Например, расовые или этнические данные, религиозные или философские убеждения, сексуальная ориентация, членство в профсоюзах, политические убеждения, информация о беременности или родах, инвалидность, генетическая информация или биометрические данные. | Нет ||
|| **Контакты** ||
|| Контакты | Например, список контактов в телефоне пользователя, адресная книга или социальная сеть. | Нет ||
|| **Пользовательский контент** ||
|| Электронные письма или текстовые сообщения | Включая строку темы, отправителя, получателей и содержимое электронного письма или сообщения. | Нет ||
|| Фотографии или видео | Фотографии или видео пользователя. | Нет ||
|| Аудиоданные | Голос пользователя или звуковые записи. | Нет ||
|| Игровой контент | Например, логика многопользовательской игры или игрового процесса, сохраненные игры, пользовательский контент в игре. | Нет ||
|| Служба поддержки пользователей | Данные, полученные пользователем во время запроса в службу поддержки. | Нет ||
|| Другой пользовательский контент | Любой другой пользовательский контент. | Нет ||
|| **История просмотров** ||
|| История просмотров | Информация о просмотрах контента, который не является частью приложения. Например, веб-сайты. | Нет ||
|| **История поиска** ||
|| История поиска | Информация о поиске через приложение. | Нет ||
|| **Идентификаторы** ||
|| ID пользователя | Например, имя пользователя, псевдоним, ID учетной записи, ID пользователя, клиентский номер или другой ID пользователя или учетной записи, который можно использовать для идентификации конкретного пользователя или учетной записи. | Нет

По желанию разработчик приложения может настроить передачу этих данных. ||
|| ID устройства | Например, рекламный идентификатор или другой ID устройства. | Да, если есть разрешение пользователя. [Запрос на разрешение](../mobile-tracking/ios-tracking.md) нужно реализовать самостоятельно. ||
|| **Покупки** ||
|| История покупок | Покупки или тенденции покупок от имени учетной записи или отдельного пользователя. | Да, начиная с версий SDK 4.0.0+

По желанию разработчик приложения может отключить передачу этих данных, используя свойство `revenueAutoTrackingEnabled`. ||
|| **Данные об использовании** ||
|| Взаимодействие с продуктом | Например, информация о запусках приложения, нажатиях, прокрутке и касаниях, данные о прослушивании музыки и просмотрах видео, местах сохранения в игре, видео или песнях, а также другая информация о взаимодействии пользователя с приложением. | Да, если речь идет о событии запуска. В остальных случаях — нет.

По желанию разработчик может полностью отключить автоматическое отслеживание сессий `sessionsAutoTracking` и [отслеживать сессии вручную](../sdk/ios/analytics/ios-listen.md). ||
|| Данные о рекламе | Информация о рекламе, которую просматривал пользователь.| Нет

По желанию разработчик приложения может настроить передачу этих данных. ||
|| Другие данные об использовании | Любые другие данные об активности пользователя в приложении. | Нет ||
|| **Диагностика** ||
|| Данные о сбоях | Например, журналы сбоев. | Нет ||
|| Данные о производительности | Например, время запуска, частота зависания или потребление энергии. | Да

AppMetrica может собирать данные об уровне заряда батареи для крэш-аналитики. ||
|| Другие данные диагностики | Любые другие данные о технической диагностике, связанные с приложением. | Нет ||
|| **Другие данные** ||
|| Другие типы данных | Любые другие не упомянутые типы данных. | Да

AppMetrica может собирать дополнительные данные. Например, техническую информацию об устройстве: версия операционной системы, тип экрана и тому подобное. ||
|#

## Использование данных {#data-use}

Выберите категории, которые соответствуют использованию данных в вашем приложении:

| Цель | Определение |
| ---- | ------- |
| Сторонняя реклама | Показ сторонних объявлений в вашем приложении или обмен данными с организациями, которые показывают стороннюю рекламу. |
| Реклама или маркетинг разработчика | Показ вашей рекламы в приложении, отправка маркетинговых сообщений непосредственно вашим пользователям или обмен данными с организациями, которые будут показывать вашу рекламу. |
| Аналитика | Использование данных для оценки поведения пользователей, понимания эффективности существующих функций продукта, планирования новых функций или измерения размера или характеристик аудитории. |
| Персонализация продукта | Настройка того, что видит пользователь. Например списка рекомендуемых продуктов, сообщений или предложений. |
| Функциональность приложения | Например, для аутентификации пользователя, включения функций, предотвращения мошенничества, внедрения мер безопасности, обеспечения бесперебойной работы сервера, минимизации сбоев приложений, повышения масштабируемости и производительности или поддержки пользователей. |
| Другие цели | Любые другие не упомянутые цели. |

## Данные, связанные с пользователем {#data-linked}

{% note info %}

Личная информация и персональные данные считаются связанными с пользователем.

{% endnote %}

Определите, связан ли каждый тип данных с идентификатором пользователя (через его учетную запись, устройство или другие данные). Сбор информации через приложение часто связан с личными данными пользователя, если не предусмотрены специальные меры защиты конфиденциальности:

- Удаление информации о любых прямых идентификаторах, таких как идентификатор пользователя или его имя, перед сбором данных.
- Обработка данных для разрыва связи и предотвращения повторной связи с реальными идентификаторами.

Чтобы данные не были связаны с личностью конкретного пользователя, избегайте определенных действий после сбора:

- Не связывайте данные с идентификатором пользователя.
- Не привязывайте данные к другим наборам данных, которые могут связать их с идентификатором конкретного пользователя.

## Трекинг {#tracking}

Трекинг — это сопоставление данных, собранных в вашем приложении о конкретном пользователе или устройстве (например, идентификатор пользователя, идентификатор устройства или профиль) с данными третьих сторон с целью рекламы или обмена данными.

Примеры трекинга:

- Целевая реклама в вашем приложении на основе пользовательских данных, собранных с приложений и веб-сайтов других компаний.
- Передача брокеру данных информации о местоположении устройства или списков электронной почты.
- Предоставление сторонней рекламной сети доступа к списку электронных писем, рекламных идентификаторов или других идентификаторов для целевой рекламы или привлечения новых пользователей.
- Размещение в вашем приложении SDK стороннего производителя, который объединяет пользовательские данные из вашего приложения с пользовательскими данными из приложений других разработчиков для таргетирования или измерения эффективности рекламы (даже если вы не используете SDK для этих целей). Например, при входе с пакетом SDK данные из вашего приложения используются для включения целевой рекламы в приложениях других разработчиков. -->

{{ feedback }}

<a href="../troubleshooting/feedback-new">
  <span class="button">Contact support</span>
</a>

{% include notitle [feedback](../_includes/feedback-button.md) %}

[*location]: \* Geolocation data is used if the `locationTracking` option is explicitly enabled and the user's permission is obtained. [Request for permission](https://developer.apple.com/documentation/corelocation/cllocationmanager?language=objc) must be implemented on your app's end.

[*id-user]: \* The user ID (`NSPrivacyCollectedDataTypeUserID`) is used if you set up the `ProfileID` sending.

[*id-device]: \* Device IDs (`NSPrivacyCollectedDataTypeDeviceID`) are used by default if the user's permission is obtained. [Request for permission](https://developer.apple.com/documentation/apptrackingtransparency/) must be implemented on your app's end.

[*purchase]: \* The purchase history (`NSPrivacyCollectedDataTypePurchaseHistory`) is used by default starting with the SDK version 4.0.0. You can disable transmission of that data using the `revenueAutoTrackingEnabled` property.

[*other-data]: \* Other data (`NSPrivacyCollectedDataTypeOtherDataTypes`) means general information about the device, such as the OS version, screen resolution, and so on.
