# Diplodoc v6.0: New Level of Performance

## Major Improvements

### Performance Optimization
- Significant CLI tools performance improvement (2x base speedup)
- Parallel document processing with up to 10x speedup on multi-core systems
- Improved TOC (Table of Contents) processing
- Resource loading optimization and caching
- Optimized handling of large projects

We have been making gradual performance improvements since version 4.50.0 and are now ready to announce the results. We have achieved a base speedup of 2x thanks to optimized document processing algorithms, improved caching, and more efficient resource utilization. Additionally, we have added parallel document processing, which further accelerates the build depending on the number of cores in the system. In some cases, especially when working with large projects on multi-core servers, we observed a 10x speedup. This significant improvement allows developers to get build results faster and work more efficiently with documentation.

Our system now efficiently processes documentation with over 50,000 articles, including individual articles containing more than 10 MB of text and markup. This enables the use of Diplodoc for creating and maintaining large-scale documentation projects without performance degradation.

### Extended Features
- Page Constructor support for modern landing pages
- Built-in search system with Algolia support
- Enhanced RTL (Right-to-Left) support for Arabic and Hebrew
- Version Control Systems integration (GitHub)

### Enhanced Table of Contents (TOC) System
- Extended variable templating support for `href` and `label` fields
- Automatic extraction of headings from referenced files for the `name` field
- Improved handling of includes in TOC with more careful file system operations
- More flexible documentation structure configuration through frontmatter

We have significantly improved the Table of Contents (TOC) system, making it more flexible and user-friendly. Now more fields support variable templating, allowing for dynamic link and label generation. The `name` field can now automatically extract headings from the file it references, simplifying documentation maintenance and keeping it up-to-date. We have also improved the handling of includes in TOC, making it more careful when working with the file system, which is especially important for large projects with many nested directories.

### Redirect System
- Built-in support for simple file-to-file redirects based on browser redirects
- Set of hooks for generating configurations for nginx and other proxy servers
- Flexible configuration of redirect rules
- Support for complex redirect scenarios for large projects

While developing the Extension API, we recognized the need to introduce a new functionality in the system - handling redirects. By default, we implemented a simple file-to-file redirect system that works based on browser redirects. For more complex scenarios, when generating configurations for nginx or other proxy servers is required, the system includes a set of hooks for convenient work with redirects. This allows flexible configuration of redirection rules depending on project requirements and infrastructure.

### Enhanced Configuration System
- New configuration format with environment variables support
- Extended settings validation capabilities
- Improved presets and variables handling
- More flexible settings override system
- Systematized command-line parameters with unified naming style
- Complete synchronization of settings between configuration file and command-line parameters

We have systematized command-line parameters for more intuitive use. Previously, we had several "disabling" parameters that were difficult to remember: `--disableLiquid`, `--lintDisabled`, `--buildDisabled`, `--needToSanitizeHtml`. We removed unnecessary parameters and standardized the remaining ones to follow a unified naming convention:

- `--disableLiquid` → `--no-template`
- `--lintDisabled` → `--no-lint`
- `--needToSanitizeHtml false` → `--no-sanitize-html`

This systematization makes the command-line interface more understandable and predictable for users.

We have also synchronized project build settings between command-line parameters and the configuration file. Now, for all main parameters in the configuration file, there is a corresponding command-line parameter. This has allowed us to add new parameters:

- `--langs` - manage documentation languages
- `--search` - configure search parameters
- `--changelogs` - manage changelog list
- `--mtimes` - configure timestamps

### Extension API and Hook System
- New extension system for developers with full TypeScript support
- Built-in hook system for extending functionality at various stages
- Modular design for creating independent, reusable extensions
- Documented API for creating plugins and integrations
- Integration examples with popular tools
- Flexible extension lifecycle management

We have already developed several extensions using the new system, which can be used as examples for creating your own extensions:

- **GenericIncluder** - extension for automatic Table of Contents (TOC) generation. Analyzes the file system, finds Markdown files, and automatically creates a TOC structure based on their location and content. When generating the TOC, it takes into account the file title and its weight specified in the frontmatter, allowing for flexible customization of the documentation structure. This significantly simplifies the organization of large documentation projects.

- **GithubVcsConnector** - extension for collecting information about contributors and article authors from GitHub. Gathers metadata about commits, authors, and contributors, which can then be displayed in the documentation interface. This allows users to see who and when made changes to the documentation, increasing transparency in the development process and acknowledging community contributions.

- **AlgoliaSearch** - integration with Algolia for full-text search capabilities. Automatically indexes documentation content in Algolia, configures search suggestions and filters, and provides fast and relevant search across the entire documentation with multi-language support.

- **LocalSearch** - extension for local documentation search using the lunr.js library. Creates a search index on the client side, enabling fast search without connecting to external services. Supports fuzzy search, phrase search, and relevance-based result ranking. Particularly useful for projects requiring offline operation or with data confidentiality restrictions.

These extensions demonstrate various capabilities of the new extension system and can serve as a starting point for developing your own plugins. Each of them implements its own set of hooks and utilizes different aspects of the extension API.

## Technical Details

### New Configuration Options
```yaml
sanitizeHtml: true
allowHtml: true
addMapFile: false
removeHiddenTocItems: false
mergeIncludes: false
staticContent: false
```

### Enhanced Extension System
- Base Program class for all CLI commands
- Hook system for functionality extension
- Configuration and logging management
- Extension registration interface

## Getting Started

1. Update dependencies to the latest version
2. Check compatibility of existing configurations
3. Review new documentation
4. Configure parameters according to your needs

### Minor Technical Improvements

- Landing pages now fully support frontmatter, allowing customization of their metadata and behavior
- Using Latex and Mermaid syntax no longer requires the `--allow-custom-resources` flag, these features are now available by default
- More secure file system operations - fixed a number of vulnerabilities that allowed access to files outside the project

## Additional Information

- [Full Documentation](https://diplodoc.com/docs)
- [Migration Guide](https://diplodoc.com/docs/migration)
- [Usage Examples](https://diplodoc.com/docs/examples) 